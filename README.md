## Introduction to Data Science
This is the source for the Introduction to Data Science textbook.

## Setup and Build

In order to build the book, you need to first install Docker 
(instructions here: [https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/)).
Then obtain the build image via
```
docker pull ubcdsci/intro-to-ds
```
From this point you have two options:

- use whatever text editor you want, and build the book on the command line
- use RStudio to both edit and build the book

We provide instructions for both methods here.

### Without RStudio

To build the **html version** of the book, navigate to the repository root folder and run
```
./build.sh
``` 
from the command line. This command automatically spawns a docker container
with the `ubcdsci/intro-to-ds` image, runs the script `build.R` from within the container,
and then stops the container.

To build the **PDF version** of the book, instead run
```
./pdfbuild.sh
```

### With RStudio

1. Run RStudio inside the `ubcdsci/intro-to-ds` docker container:
    - in terminal, navigate to the root of this project repo
    - type the following in terminal:

    ```
    docker-compose up -d
    ```
    If you use this, then when you are done working, type `docker-compose down` to remove the dangling container.
    

    > Alternatively, you can type:
    > ```
    > docker run --rm -it -p 8787:8787 -m 4g -v $PWD:/home/rstudio/introduction-to-datascience -e PASSWORD=password ubcdsci/intro-to-ds:v0.1.0
    > ```
    
    Next:
    - open a web browser and type [http://localhost:8787/](http://localhost:8787/)
    - for the username enter `rstudio` 
    - for the password enter `password` (or whatever you may have changed it to in the `docker run` command above)
    
3. Finally, you can render the book by running the following R code in the R console:
    ```
    bookdown::render_book('index.Rmd', 'bookdown::gitbook')
    ```

## Style Guide

#### General
- 80 character line limit
- `set.seed` once at the beginning of each chapter

#### R code blocks
- For R code block labels, use the format `##-[name with only alphanumeric +
  hyphens]` where the `##` is the 2-digit chapter number, e.g. `03-test-name`
  for a label `test-name` in chapter 3

#### Figures

#### Tables

#### Bibliography

#### Naming conventions

## Updating the textbook data
Data sets are collected and curated by `data/retrieve_data.ipynb`. To run that notebook in the Docker container type the following in the terminal:

```
docker run --rm -it -p 8888:8888 -v $PWD:/home/rstudio/introduction-to-datascience ubcdsci/intro-to-ds jupyter notebook --ip=0.0.0.0 --allow-root
```

## Repository Organization / Important Files
- The files `index.Rmd` and `##-name.Rmd` are [R-markdown](https://rmarkdown.rstudio.com/) chapter contents to be parsed by [Bookdown](https://bookdown.org/)
- `_bookdown.yml` sets the output directory (`docs/`) and default chapter name
- `img/` contains custom images to be used in the text; note this is not all of the images as some are generated by R code when compiling
- `data/` stores datasets processed during compile
- `docs/.nojekyll` tells github's static site builder not to run [Jekyll](https://jekyllrb.com/). This avoids Jekyll deleting the folder `docs/_main_files` (as it starts with an underscore)

## License Information

[Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)](https://creativecommons.org/licenses/by-nc-sa/4.0/)
