<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Effective data visualization | Data Science: A First Introduction</title>
  <meta name="description" content="This is a textbook for teaching a first introduction to data science." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Effective data visualization | Data Science: A First Introduction" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a textbook for teaching a first introduction to data science." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Effective data visualization | Data Science: A First Introduction" />
  
  <meta name="twitter:description" content="This is a textbook for teaching a first introduction to data science." />
  

<meta name="author" content="Tiffany-Anne Timbers" />
<meta name="author" content="Trevor Campbell" />
<meta name="author" content="Melissa Lee" />


<meta name="date" content="2021-09-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="wrangling.html"/>
<link rel="next" href="classification.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science: A First Introduction</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R and the tidyverse</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>1.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#canadian-languages-data-set"><i class="fa fa-check"></i><b>1.3</b> Canadian languages data set</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#asking-a-question"><i class="fa fa-check"></i><b>1.4</b> Asking a question</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#loading-a-tabular-data-set"><i class="fa fa-check"></i><b>1.5</b> Loading a tabular data set</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#naming-things-in-r"><i class="fa fa-check"></i><b>1.6</b> Naming things in R</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#creating-subsets-of-data-frames-with-filter-select"><i class="fa fa-check"></i><b>1.7</b> Creating subsets of data frames with <code>filter</code> &amp; <code>select</code></a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="intro.html"><a href="intro.html#using-filter-to-extract-rows"><i class="fa fa-check"></i><b>1.7.1</b> Using <code>filter</code> to extract rows</a></li>
<li class="chapter" data-level="1.7.2" data-path="intro.html"><a href="intro.html#using-select-to-extract-columns"><i class="fa fa-check"></i><b>1.7.2</b> Using <code>select</code> to extract columns</a></li>
<li class="chapter" data-level="1.7.3" data-path="intro.html"><a href="intro.html#using-arrange-to-order-and-slice-to-select-rows-by-index-number"><i class="fa fa-check"></i><b>1.7.3</b> Using <code>arrange</code> to order and <code>slice</code> to select rows by index number</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#exploring-data-with-visualizations"><i class="fa fa-check"></i><b>1.8</b> Exploring data with visualizations</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="intro.html"><a href="intro.html#using-ggplot-to-create-a-bar-plot"><i class="fa fa-check"></i><b>1.8.1</b> Using <code>ggplot</code> to create a bar plot</a></li>
<li class="chapter" data-level="1.8.2" data-path="intro.html"><a href="intro.html#formatting-ggplot-objects"><i class="fa fa-check"></i><b>1.8.2</b> Formatting ggplot objects</a></li>
<li class="chapter" data-level="1.8.3" data-path="intro.html"><a href="intro.html#putting-it-all-together"><i class="fa fa-check"></i><b>1.8.3</b> Putting it all together</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#accessing-documentation"><i class="fa fa-check"></i><b>1.9</b> Accessing documentation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading.html"><a href="reading.html"><i class="fa fa-check"></i><b>2</b> Reading in data locally and from the web</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reading.html"><a href="reading.html#overview-1"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="reading.html"><a href="reading.html#chapter-learning-objectives-1"><i class="fa fa-check"></i><b>2.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="2.3" data-path="reading.html"><a href="reading.html#absolute-and-relative-file-paths"><i class="fa fa-check"></i><b>2.3</b> Absolute and relative file paths</a></li>
<li class="chapter" data-level="2.4" data-path="reading.html"><a href="reading.html#reading-tabular-data-from-a-plain-text-file-into-r"><i class="fa fa-check"></i><b>2.4</b> Reading tabular data from a plain text file into R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="reading.html"><a href="reading.html#readcsv"><i class="fa fa-check"></i><b>2.4.1</b> <code>read_csv</code> to read in comma-separated files</a></li>
<li class="chapter" data-level="2.4.2" data-path="reading.html"><a href="reading.html#skipping-rows-when-reading-in-data"><i class="fa fa-check"></i><b>2.4.2</b> Skipping rows when reading in data</a></li>
<li class="chapter" data-level="2.4.3" data-path="reading.html"><a href="reading.html#read_tsv-to-read-in-tab-separated-files"><i class="fa fa-check"></i><b>2.4.3</b> <code>read_tsv</code> to read in tab-separated files</a></li>
<li class="chapter" data-level="2.4.4" data-path="reading.html"><a href="reading.html#read_delim-as-a-more-flexible-method-to-get-tabular-data-into-r"><i class="fa fa-check"></i><b>2.4.4</b> <code>read_delim</code> as a more flexible method to get tabular data into R</a></li>
<li class="chapter" data-level="2.4.5" data-path="reading.html"><a href="reading.html#reading-tabular-data-directly-from-a-url"><i class="fa fa-check"></i><b>2.4.5</b> Reading tabular data directly from a URL</a></li>
<li class="chapter" data-level="2.4.6" data-path="reading.html"><a href="reading.html#previewing-a-data-file-before-reading-it-into-r"><i class="fa fa-check"></i><b>2.4.6</b> Previewing a data file before reading it into R</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reading.html"><a href="reading.html#reading-tabular-data-from-a-microsoft-excel-file"><i class="fa fa-check"></i><b>2.5</b> Reading tabular data from a Microsoft Excel file</a></li>
<li class="chapter" data-level="2.6" data-path="reading.html"><a href="reading.html#reading-data-from-a-database"><i class="fa fa-check"></i><b>2.6</b> Reading data from a database</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="reading.html"><a href="reading.html#connecting-to-a-database"><i class="fa fa-check"></i><b>2.6.1</b> Connecting to a database</a></li>
<li class="chapter" data-level="2.6.2" data-path="reading.html"><a href="reading.html#interacting-with-a-database"><i class="fa fa-check"></i><b>2.6.2</b> Interacting with a database</a></li>
<li class="chapter" data-level="2.6.3" data-path="reading.html"><a href="reading.html#why-should-we-bother-with-databases-at-all"><i class="fa fa-check"></i><b>2.6.3</b> Why should we bother with databases at all?</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="reading.html"><a href="reading.html#writing-data-from-r-to-a-.csv-file"><i class="fa fa-check"></i><b>2.7</b> Writing data from R to a <code>.csv</code> file</a></li>
<li class="chapter" data-level="2.8" data-path="reading.html"><a href="reading.html#obtaining-data-from-the-web"><i class="fa fa-check"></i><b>2.8</b> Obtaining data from the web</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="reading.html"><a href="reading.html#web-scraping"><i class="fa fa-check"></i><b>2.8.1</b> Web scraping</a></li>
<li class="chapter" data-level="2.8.2" data-path="reading.html"><a href="reading.html#using-an-api"><i class="fa fa-check"></i><b>2.8.2</b> Using an API</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="reading.html"><a href="reading.html#additional-resources"><i class="fa fa-check"></i><b>2.9</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>3</b> Cleaning and wrangling data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wrangling.html"><a href="wrangling.html#overview-2"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="wrangling.html"><a href="wrangling.html#chapter-learning-objectives-2"><i class="fa fa-check"></i><b>3.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="3.3" data-path="wrangling.html"><a href="wrangling.html#data-frames-and-vectors"><i class="fa fa-check"></i><b>3.3</b> Data frames and Vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="wrangling.html"><a href="wrangling.html#what-is-a-data-frame"><i class="fa fa-check"></i><b>3.3.1</b> What is a data frame?</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrangling.html"><a href="wrangling.html#what-is-a-vector"><i class="fa fa-check"></i><b>3.3.2</b> What is a vector?</a></li>
<li class="chapter" data-level="3.3.3" data-path="wrangling.html"><a href="wrangling.html#how-are-vectors-different-from-a-list"><i class="fa fa-check"></i><b>3.3.3</b> How are vectors different from a list?</a></li>
<li class="chapter" data-level="3.3.4" data-path="wrangling.html"><a href="wrangling.html#what-does-this-have-to-do-with-data-frames"><i class="fa fa-check"></i><b>3.3.4</b> What does this have to do with data frames?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangling.html"><a href="wrangling.html#tidy-data"><i class="fa fa-check"></i><b>3.4</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="wrangling.html"><a href="wrangling.html#what-is-tidy-data"><i class="fa fa-check"></i><b>3.4.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="3.4.2" data-path="wrangling.html"><a href="wrangling.html#why-is-tidy-data-important-in-r"><i class="fa fa-check"></i><b>3.4.2</b> Why is tidy data important in R?</a></li>
<li class="chapter" data-level="3.4.3" data-path="wrangling.html"><a href="wrangling.html#going-from-wide-to-long-or-tidy-using-pivot_longer"><i class="fa fa-check"></i><b>3.4.3</b> Going from wide to long (or tidy!) using <code>pivot_longer</code></a></li>
<li class="chapter" data-level="3.4.4" data-path="wrangling.html"><a href="wrangling.html#pivot-wider"><i class="fa fa-check"></i><b>3.4.4</b> Going from long to wide using <code>pivot_wider</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="wrangling.html"><a href="wrangling.html#using-separate-to-deal-with-multiple-delimiters"><i class="fa fa-check"></i><b>3.4.5</b> Using <code>separate</code> to deal with multiple delimiters</a></li>
<li class="chapter" data-level="3.4.6" data-path="wrangling.html"><a href="wrangling.html#notes-on-defining-tidy-data"><i class="fa fa-check"></i><b>3.4.6</b> Notes on defining tidy data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="wrangling.html"><a href="wrangling.html#using-select-to-extract-a-range-of-columns"><i class="fa fa-check"></i><b>3.5</b> Using <code>select</code> to extract a range of columns</a></li>
<li class="chapter" data-level="3.6" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-1"><i class="fa fa-check"></i><b>3.6</b> Using <code>filter</code> to extract rows</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-with"><i class="fa fa-check"></i><b>3.6.1</b> Using <code>filter</code> to extract rows with <code>==</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-with-1"><i class="fa fa-check"></i><b>3.6.2</b> Using <code>filter</code> to extract rows with <code>!=</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-with-2"><i class="fa fa-check"></i><b>3.6.3</b> Using <code>filter</code> to extract rows with <code>,</code> &amp;`</a></li>
<li class="chapter" data-level="3.6.4" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-with-3"><i class="fa fa-check"></i><b>3.6.4</b> Using <code>filter</code> to extract rows with <code>|</code></a></li>
<li class="chapter" data-level="3.6.5" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-with-in"><i class="fa fa-check"></i><b>3.6.5</b> Using <code>filter</code> to extract rows with <code>%in%</code></a></li>
<li class="chapter" data-level="3.6.6" data-path="wrangling.html"><a href="wrangling.html#using-filter-to-extract-rows-with-values-above-or-below-a-threshold"><i class="fa fa-check"></i><b>3.6.6</b> Using <code>filter</code> to extract rows with values above or below a threshold</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="wrangling.html"><a href="wrangling.html#using-mutate-to-modify-or-add-columns"><i class="fa fa-check"></i><b>3.7</b> Using <code>mutate</code> to modify or add columns</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="wrangling.html"><a href="wrangling.html#using-mutate-to-modify-columns"><i class="fa fa-check"></i><b>3.7.1</b> Using <code>mutate</code> to modify columns</a></li>
<li class="chapter" data-level="3.7.2" data-path="wrangling.html"><a href="wrangling.html#using-mutate-to-create-new-columns"><i class="fa fa-check"></i><b>3.7.2</b> Using <code>mutate</code> to create new columns</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="wrangling.html"><a href="wrangling.html#creating-a-visualization-with-tidy-data"><i class="fa fa-check"></i><b>3.8</b> Creating a visualization with tidy data</a></li>
<li class="chapter" data-level="3.9" data-path="wrangling.html"><a href="wrangling.html#combining-functions-using-the-pipe-operator"><i class="fa fa-check"></i><b>3.9</b> Combining functions using the pipe operator, <code>|&gt;</code></a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="wrangling.html"><a href="wrangling.html#using-to-combine-filter-and-select"><i class="fa fa-check"></i><b>3.9.1</b> Using <code>|&gt;</code> to combine <code>filter</code> and <code>select</code></a></li>
<li class="chapter" data-level="3.9.2" data-path="wrangling.html"><a href="wrangling.html#using-with-more-than-two-functions"><i class="fa fa-check"></i><b>3.9.2</b> Using <code>|&gt;</code> with more than two functions</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="wrangling.html"><a href="wrangling.html#iterating-over-data-with-group_by-summarize"><i class="fa fa-check"></i><b>3.10</b> Iterating over data with <code>group_by</code> + <code>summarize</code></a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="wrangling.html"><a href="wrangling.html#calculating-summary-statistics"><i class="fa fa-check"></i><b>3.10.1</b> Calculating summary statistics:</a></li>
<li class="chapter" data-level="3.10.2" data-path="wrangling.html"><a href="wrangling.html#calculating-group-summary-statistics"><i class="fa fa-check"></i><b>3.10.2</b> Calculating group summary statistics:</a></li>
<li class="chapter" data-level="3.10.3" data-path="wrangling.html"><a href="wrangling.html#additional-reading-on-the-dplyr-functions"><i class="fa fa-check"></i><b>3.10.3</b> Additional reading on the <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="wrangling.html"><a href="wrangling.html#using-purrrs-map-functions-to-iterate"><i class="fa fa-check"></i><b>3.11</b> Using <code>purrr</code>’s <code>map*</code> functions to iterate</a></li>
<li class="chapter" data-level="3.12" data-path="wrangling.html"><a href="wrangling.html#additional-resources-1"><i class="fa fa-check"></i><b>3.12</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="viz.html"><a href="viz.html"><i class="fa fa-check"></i><b>4</b> Effective data visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="viz.html"><a href="viz.html#overview-3"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="viz.html"><a href="viz.html#chapter-learning-objectives-3"><i class="fa fa-check"></i><b>4.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="4.3" data-path="viz.html"><a href="viz.html#choosing-the-visualization"><i class="fa fa-check"></i><b>4.3</b> Choosing the visualization</a></li>
<li class="chapter" data-level="4.4" data-path="viz.html"><a href="viz.html#refining-the-visualization"><i class="fa fa-check"></i><b>4.4</b> Refining the visualization</a></li>
<li class="chapter" data-level="4.5" data-path="viz.html"><a href="viz.html#creating-visualizations-with-ggplot2"><i class="fa fa-check"></i><b>4.5</b> Creating visualizations with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="viz.html"><a href="viz.html#the-mauna-loa-co2-data-set"><i class="fa fa-check"></i><b>4.5.1</b> The Mauna Loa CO2 data set</a></li>
<li class="chapter" data-level="4.5.2" data-path="viz.html"><a href="viz.html#the-island-landmass-data-set"><i class="fa fa-check"></i><b>4.5.2</b> The island landmass data set</a></li>
<li class="chapter" data-level="4.5.3" data-path="viz.html"><a href="viz.html#the-old-faithful-eruptionwaiting-time-data-set"><i class="fa fa-check"></i><b>4.5.3</b> The Old Faithful eruption/waiting time data set</a></li>
<li class="chapter" data-level="4.5.4" data-path="viz.html"><a href="viz.html#the-canadian-languages-data-set"><i class="fa fa-check"></i><b>4.5.4</b> The Canadian languages data set</a></li>
<li class="chapter" data-level="4.5.5" data-path="viz.html"><a href="viz.html#the-michelson-speed-of-light-data-set"><i class="fa fa-check"></i><b>4.5.5</b> The Michelson speed of light data set</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="viz.html"><a href="viz.html#explaining-the-visualization"><i class="fa fa-check"></i><b>4.6</b> Explaining the visualization</a></li>
<li class="chapter" data-level="4.7" data-path="viz.html"><a href="viz.html#saving-the-visualization"><i class="fa fa-check"></i><b>4.7</b> Saving the visualization</a></li>
<li class="chapter" data-level="4.8" data-path="viz.html"><a href="viz.html#additional-resources-2"><i class="fa fa-check"></i><b>4.8</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>5</b> Classification I: training &amp; predicting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="classification.html"><a href="classification.html#overview-4"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="classification.html"><a href="classification.html#chapter-learning-objectives-4"><i class="fa fa-check"></i><b>5.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="5.3" data-path="classification.html"><a href="classification.html#the-classification-problem"><i class="fa fa-check"></i><b>5.3</b> The classification problem</a></li>
<li class="chapter" data-level="5.4" data-path="classification.html"><a href="classification.html#exploring-a-data-set"><i class="fa fa-check"></i><b>5.4</b> Exploring a data set</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="classification.html"><a href="classification.html#loading-the-cancer-data"><i class="fa fa-check"></i><b>5.4.1</b> Loading the cancer data</a></li>
<li class="chapter" data-level="5.4.2" data-path="classification.html"><a href="classification.html#describing-the-variables-in-the-cancer-data-set"><i class="fa fa-check"></i><b>5.4.2</b> Describing the variables in the cancer data set</a></li>
<li class="chapter" data-level="5.4.3" data-path="classification.html"><a href="classification.html#exploring-the-cancer-data"><i class="fa fa-check"></i><b>5.4.3</b> Exploring the cancer data</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="classification.html"><a href="classification.html#classification-with-k-nearest-neighbours"><i class="fa fa-check"></i><b>5.5</b> Classification with K-nearest neighbours</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="classification.html"><a href="classification.html#distance-between-points"><i class="fa fa-check"></i><b>5.5.1</b> Distance between points</a></li>
<li class="chapter" data-level="5.5.2" data-path="classification.html"><a href="classification.html#more-than-two-explanatory-variables"><i class="fa fa-check"></i><b>5.5.2</b> More than two explanatory variables</a></li>
<li class="chapter" data-level="5.5.3" data-path="classification.html"><a href="classification.html#summary-of-k-nearest-neighbours-algorithm"><i class="fa fa-check"></i><b>5.5.3</b> Summary of K-nearest neighbours algorithm</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="classification.html"><a href="classification.html#k-nearest-neighbours-with-tidymodels"><i class="fa fa-check"></i><b>5.6</b> K-nearest neighbours with <code>tidymodels</code></a></li>
<li class="chapter" data-level="5.7" data-path="classification.html"><a href="classification.html#data-preprocessing-with-tidymodels"><i class="fa fa-check"></i><b>5.7</b> Data preprocessing with <code>tidymodels</code></a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="classification.html"><a href="classification.html#centering-and-scaling"><i class="fa fa-check"></i><b>5.7.1</b> Centering and scaling</a></li>
<li class="chapter" data-level="5.7.2" data-path="classification.html"><a href="classification.html#balancing"><i class="fa fa-check"></i><b>5.7.2</b> Balancing</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="classification.html"><a href="classification.html#puttingittogetherworkflow"><i class="fa fa-check"></i><b>5.8</b> Putting it together in a <code>workflow</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="classification2.html"><a href="classification2.html"><i class="fa fa-check"></i><b>6</b> Classification II: evaluation &amp; tuning</a>
<ul>
<li class="chapter" data-level="6.1" data-path="classification2.html"><a href="classification2.html#overview-5"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="classification2.html"><a href="classification2.html#chapter-learning-objectives-5"><i class="fa fa-check"></i><b>6.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="6.3" data-path="classification2.html"><a href="classification2.html#evaluating-accuracy"><i class="fa fa-check"></i><b>6.3</b> Evaluating accuracy</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="classification2.html"><a href="classification2.html#create-the-train-test-split"><i class="fa fa-check"></i><b>6.3.1</b> Create the train / test split</a></li>
<li class="chapter" data-level="6.3.2" data-path="classification2.html"><a href="classification2.html#preprocess-the-data"><i class="fa fa-check"></i><b>6.3.2</b> Preprocess the data</a></li>
<li class="chapter" data-level="6.3.3" data-path="classification2.html"><a href="classification2.html#train-the-classifier"><i class="fa fa-check"></i><b>6.3.3</b> Train the classifier</a></li>
<li class="chapter" data-level="6.3.4" data-path="classification2.html"><a href="classification2.html#predict-the-labels-in-the-test-set"><i class="fa fa-check"></i><b>6.3.4</b> Predict the labels in the test set</a></li>
<li class="chapter" data-level="6.3.5" data-path="classification2.html"><a href="classification2.html#compute-the-accuracy"><i class="fa fa-check"></i><b>6.3.5</b> Compute the accuracy</a></li>
<li class="chapter" data-level="6.3.6" data-path="classification2.html"><a href="classification2.html#critically-analyze-performance"><i class="fa fa-check"></i><b>6.3.6</b> Critically analyze performance</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="classification2.html"><a href="classification2.html#tuning-the-classifier"><i class="fa fa-check"></i><b>6.4</b> Tuning the classifier</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="classification2.html"><a href="classification2.html#cross-validation"><i class="fa fa-check"></i><b>6.4.1</b> Cross-validation</a></li>
<li class="chapter" data-level="6.4.2" data-path="classification2.html"><a href="classification2.html#parameter-value-selection"><i class="fa fa-check"></i><b>6.4.2</b> Parameter value selection</a></li>
<li class="chapter" data-level="6.4.3" data-path="classification2.html"><a href="classification2.html#underoverfitting"><i class="fa fa-check"></i><b>6.4.3</b> Under/Overfitting</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="classification2.html"><a href="classification2.html#summary"><i class="fa fa-check"></i><b>6.5</b> Summary</a></li>
<li class="chapter" data-level="6.6" data-path="classification2.html"><a href="classification2.html#predictor-variable-selection"><i class="fa fa-check"></i><b>6.6</b> Predictor variable selection</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="classification2.html"><a href="classification2.html#the-effect-of-irrelevant-predictors"><i class="fa fa-check"></i><b>6.6.1</b> The effect of irrelevant predictors</a></li>
<li class="chapter" data-level="6.6.2" data-path="classification2.html"><a href="classification2.html#finding-a-good-subset-of-predictors"><i class="fa fa-check"></i><b>6.6.2</b> Finding a good subset of predictors</a></li>
<li class="chapter" data-level="6.6.3" data-path="classification2.html"><a href="classification2.html#forward-selection-in-r"><i class="fa fa-check"></i><b>6.6.3</b> Forward selection in R</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="classification2.html"><a href="classification2.html#additional-resources-3"><i class="fa fa-check"></i><b>6.7</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regression1.html"><a href="regression1.html"><i class="fa fa-check"></i><b>7</b> Regression I: K-nearest neighbours</a>
<ul>
<li class="chapter" data-level="7.1" data-path="regression1.html"><a href="regression1.html#overview-6"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="regression1.html"><a href="regression1.html#chapter-learning-objectives-6"><i class="fa fa-check"></i><b>7.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="7.3" data-path="regression1.html"><a href="regression1.html#the-regression-problem"><i class="fa fa-check"></i><b>7.3</b> The regression problem</a></li>
<li class="chapter" data-level="7.4" data-path="regression1.html"><a href="regression1.html#exploring-a-data-set-1"><i class="fa fa-check"></i><b>7.4</b> Exploring a data set</a></li>
<li class="chapter" data-level="7.5" data-path="regression1.html"><a href="regression1.html#k-nearest-neighbours-regression"><i class="fa fa-check"></i><b>7.5</b> K-nearest neighbours regression</a></li>
<li class="chapter" data-level="7.6" data-path="regression1.html"><a href="regression1.html#training-evaluating-and-tuning-the-model"><i class="fa fa-check"></i><b>7.6</b> Training, evaluating, and tuning the model</a></li>
<li class="chapter" data-level="7.7" data-path="regression1.html"><a href="regression1.html#underfitting-and-overfitting"><i class="fa fa-check"></i><b>7.7</b> Underfitting and overfitting</a></li>
<li class="chapter" data-level="7.8" data-path="regression1.html"><a href="regression1.html#evaluating-on-the-test-set"><i class="fa fa-check"></i><b>7.8</b> Evaluating on the test set</a></li>
<li class="chapter" data-level="7.9" data-path="regression1.html"><a href="regression1.html#strengths-and-limitations-of-knn-regression"><i class="fa fa-check"></i><b>7.9</b> Strengths and limitations of KNN regression</a></li>
<li class="chapter" data-level="7.10" data-path="regression1.html"><a href="regression1.html#multivariate-knn-regression"><i class="fa fa-check"></i><b>7.10</b> Multivariate KNN regression</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="regression2.html"><a href="regression2.html"><i class="fa fa-check"></i><b>8</b> Regression II: linear regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="regression2.html"><a href="regression2.html#overview-7"><i class="fa fa-check"></i><b>8.1</b> Overview</a></li>
<li class="chapter" data-level="8.2" data-path="regression2.html"><a href="regression2.html#chapter-learning-objectives-7"><i class="fa fa-check"></i><b>8.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="8.3" data-path="regression2.html"><a href="regression2.html#simple-linear-regression"><i class="fa fa-check"></i><b>8.3</b> Simple linear regression</a></li>
<li class="chapter" data-level="8.4" data-path="regression2.html"><a href="regression2.html#linear-regression-in-r"><i class="fa fa-check"></i><b>8.4</b> Linear regression in R</a></li>
<li class="chapter" data-level="8.5" data-path="regression2.html"><a href="regression2.html#comparing-simple-linear-and-knn-regression"><i class="fa fa-check"></i><b>8.5</b> Comparing simple linear and KNN regression</a></li>
<li class="chapter" data-level="8.6" data-path="regression2.html"><a href="regression2.html#multivariate-linear-regression"><i class="fa fa-check"></i><b>8.6</b> Multivariate linear regression</a></li>
<li class="chapter" data-level="8.7" data-path="regression2.html"><a href="regression2.html#multicollinearity-and-outliers"><i class="fa fa-check"></i><b>8.7</b> Multicollinearity and outliers</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="regression2.html"><a href="regression2.html#outliers"><i class="fa fa-check"></i><b>8.7.1</b> Outliers</a></li>
<li class="chapter" data-level="8.7.2" data-path="regression2.html"><a href="regression2.html#multicollinearity"><i class="fa fa-check"></i><b>8.7.2</b> Multicollinearity</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="regression2.html"><a href="regression2.html#designing-new-predictors"><i class="fa fa-check"></i><b>8.8</b> Designing new predictors</a></li>
<li class="chapter" data-level="8.9" data-path="regression2.html"><a href="regression2.html#the-other-sides-of-regression"><i class="fa fa-check"></i><b>8.9</b> The other sides of regression</a></li>
<li class="chapter" data-level="8.10" data-path="regression2.html"><a href="regression2.html#additional-resources-4"><i class="fa fa-check"></i><b>8.10</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>9</b> Clustering</a>
<ul>
<li class="chapter" data-level="9.1" data-path="clustering.html"><a href="clustering.html#overview-8"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="clustering.html"><a href="clustering.html#chapter-learning-objectives-8"><i class="fa fa-check"></i><b>9.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="9.3" data-path="clustering.html"><a href="clustering.html#clustering-1"><i class="fa fa-check"></i><b>9.3</b> Clustering</a></li>
<li class="chapter" data-level="9.4" data-path="clustering.html"><a href="clustering.html#k-means"><i class="fa fa-check"></i><b>9.4</b> K-means</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="clustering.html"><a href="clustering.html#measuring-cluster-quality"><i class="fa fa-check"></i><b>9.4.1</b> Measuring cluster quality</a></li>
<li class="chapter" data-level="9.4.2" data-path="clustering.html"><a href="clustering.html#the-clustering-algorithm"><i class="fa fa-check"></i><b>9.4.2</b> The clustering algorithm</a></li>
<li class="chapter" data-level="9.4.3" data-path="clustering.html"><a href="clustering.html#random-restarts"><i class="fa fa-check"></i><b>9.4.3</b> Random restarts</a></li>
<li class="chapter" data-level="9.4.4" data-path="clustering.html"><a href="clustering.html#choosing-k"><i class="fa fa-check"></i><b>9.4.4</b> Choosing K</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="clustering.html"><a href="clustering.html#data-pre-processing-for-k-means"><i class="fa fa-check"></i><b>9.5</b> Data pre-processing for K-means</a></li>
<li class="chapter" data-level="9.6" data-path="clustering.html"><a href="clustering.html#k-means-in-r"><i class="fa fa-check"></i><b>9.6</b> K-means in R</a></li>
<li class="chapter" data-level="9.7" data-path="clustering.html"><a href="clustering.html#additional-resources-5"><i class="fa fa-check"></i><b>9.7</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="inference.html"><a href="inference.html"><i class="fa fa-check"></i><b>10</b> Introduction to statistical inference</a>
<ul>
<li class="chapter" data-level="10.1" data-path="inference.html"><a href="inference.html#overview-9"><i class="fa fa-check"></i><b>10.1</b> Overview</a></li>
<li class="chapter" data-level="10.2" data-path="inference.html"><a href="inference.html#chapter-learning-objectives-9"><i class="fa fa-check"></i><b>10.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="10.3" data-path="inference.html"><a href="inference.html#why-do-we-need-sampling"><i class="fa fa-check"></i><b>10.3</b> Why do we need sampling?</a></li>
<li class="chapter" data-level="10.4" data-path="inference.html"><a href="inference.html#sampling-distributions"><i class="fa fa-check"></i><b>10.4</b> Sampling distributions</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="inference.html"><a href="inference.html#sampling-distributions-for-proportions"><i class="fa fa-check"></i><b>10.4.1</b> Sampling distributions for proportions</a></li>
<li class="chapter" data-level="10.4.2" data-path="inference.html"><a href="inference.html#sampling-distributions-for-means"><i class="fa fa-check"></i><b>10.4.2</b> Sampling distributions for means</a></li>
<li class="chapter" data-level="10.4.3" data-path="inference.html"><a href="inference.html#summary-1"><i class="fa fa-check"></i><b>10.4.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="inference.html"><a href="inference.html#bootstrapping"><i class="fa fa-check"></i><b>10.5</b> Bootstrapping</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="inference.html"><a href="inference.html#overview-10"><i class="fa fa-check"></i><b>10.5.1</b> Overview</a></li>
<li class="chapter" data-level="10.5.2" data-path="inference.html"><a href="inference.html#bootstrapping-in-r"><i class="fa fa-check"></i><b>10.5.2</b> Bootstrapping in R</a></li>
<li class="chapter" data-level="10.5.3" data-path="inference.html"><a href="inference.html#using-the-bootstrap-to-calculate-a-plausible-range"><i class="fa fa-check"></i><b>10.5.3</b> Using the bootstrap to calculate a plausible range</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="inference.html"><a href="inference.html#additional-resources-6"><i class="fa fa-check"></i><b>10.6</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html"><i class="fa fa-check"></i><b>11</b> Combining code and text with Jupyter</a>
<ul>
<li class="chapter" data-level="11.1" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#overview-11"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#chapter-learning-objectives-10"><i class="fa fa-check"></i><b>11.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="11.3" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#jupyter"><i class="fa fa-check"></i><b>11.3</b> Jupyter</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#accessing-jupyter"><i class="fa fa-check"></i><b>11.3.1</b> Accessing Jupyter</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#code-cells"><i class="fa fa-check"></i><b>11.4</b> Code cells</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#executing-code-cells"><i class="fa fa-check"></i><b>11.4.1</b> Executing code cells</a></li>
<li class="chapter" data-level="11.4.2" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#the-kernel"><i class="fa fa-check"></i><b>11.4.2</b> The Kernel</a></li>
<li class="chapter" data-level="11.4.3" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#creating-new-code-cells"><i class="fa fa-check"></i><b>11.4.3</b> Creating new code cells</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#markdown-cells"><i class="fa fa-check"></i><b>11.5</b> Markdown cells</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#editing-markdown-cells"><i class="fa fa-check"></i><b>11.5.1</b> Editing Markdown cells</a></li>
<li class="chapter" data-level="11.5.2" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#creating-new-markdown-cells"><i class="fa fa-check"></i><b>11.5.2</b> Creating new Markdown cells</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#saving-your-work"><i class="fa fa-check"></i><b>11.6</b> Saving your work</a></li>
<li class="chapter" data-level="11.7" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#best-practices-for-running-a-notebook"><i class="fa fa-check"></i><b>11.7</b> Best practices for running a notebook</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#best-practices-for-executing-code-cells"><i class="fa fa-check"></i><b>11.7.1</b> Best practices for executing code cells</a></li>
<li class="chapter" data-level="11.7.2" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#best-practices-for-including-r-packages-in-notebooks"><i class="fa fa-check"></i><b>11.7.2</b> Best practices for including R packages in notebooks</a></li>
<li class="chapter" data-level="11.7.3" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#summary-of-best-practices-for-running-a-notebook"><i class="fa fa-check"></i><b>11.7.3</b> Summary of best practices for running a notebook</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#exploring-data-files"><i class="fa fa-check"></i><b>11.8</b> Exploring data files</a></li>
<li class="chapter" data-level="11.9" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#exporting-to-a-different-file-format"><i class="fa fa-check"></i><b>11.9</b> Exporting to a different file format</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#exporting-to-html"><i class="fa fa-check"></i><b>11.9.1</b> Exporting to HTML</a></li>
<li class="chapter" data-level="11.9.2" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#exporting-to-pdf"><i class="fa fa-check"></i><b>11.9.2</b> Exporting to PDF</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#creating-a-new-jupyter-notebook"><i class="fa fa-check"></i><b>11.10</b> Creating a new Jupyter notebook</a></li>
<li class="chapter" data-level="11.11" data-path="getting-started-with-jupyter.html"><a href="getting-started-with-jupyter.html#additional-resources-7"><i class="fa fa-check"></i><b>11.11</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html"><i class="fa fa-check"></i><b>12</b> Collaboration with version control</a>
<ul>
<li class="chapter" data-level="12.1" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#overview-12"><i class="fa fa-check"></i><b>12.1</b> Overview</a></li>
<li class="chapter" data-level="12.2" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#chapter-learning-objectives-11"><i class="fa fa-check"></i><b>12.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="12.3" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#what-is-version-control-and-why-should-i-use-it"><i class="fa fa-check"></i><b>12.3</b> What is version control, and why should I use it?</a></li>
<li class="chapter" data-level="12.4" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#version-control-repositories"><i class="fa fa-check"></i><b>12.4</b> Version control repositories</a></li>
<li class="chapter" data-level="12.5" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#version-control-workflows"><i class="fa fa-check"></i><b>12.5</b> Version control workflows</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#commit-changes"><i class="fa fa-check"></i><b>12.5.1</b> Committing changes to a local repository</a></li>
<li class="chapter" data-level="12.5.2" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#pushing-changes-to-a-remote-repository"><i class="fa fa-check"></i><b>12.5.2</b> Pushing changes to a remote repository</a></li>
<li class="chapter" data-level="12.5.3" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#pulling-changes-from-a-remote-repository"><i class="fa fa-check"></i><b>12.5.3</b> Pulling changes from a remote repository</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#working-with-remote-repositories-using-github"><i class="fa fa-check"></i><b>12.6</b> Working with remote repositories using GitHub</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#creating-a-remote-repository-on-github"><i class="fa fa-check"></i><b>12.6.1</b> Creating a remote repository on GitHub</a></li>
<li class="chapter" data-level="12.6.2" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#editing-files-on-github-with-the-pen-tool"><i class="fa fa-check"></i><b>12.6.2</b> Editing files on GitHub with the pen tool</a></li>
<li class="chapter" data-level="12.6.3" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#creating-files-on-github-with-the-add-file-menu"><i class="fa fa-check"></i><b>12.6.3</b> Creating files on GitHub with the “Add file” menu</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#local-repo-jupyter"><i class="fa fa-check"></i><b>12.7</b> Working with local repositories using Jupyter</a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#cloning-a-repository-using-jupyter"><i class="fa fa-check"></i><b>12.7.1</b> Cloning a repository using Jupyter</a></li>
<li class="chapter" data-level="12.7.2" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#specifying-files-to-commit"><i class="fa fa-check"></i><b>12.7.2</b> Specifying files to commit</a></li>
<li class="chapter" data-level="12.7.3" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#making-the-commit"><i class="fa fa-check"></i><b>12.7.3</b> Making the commit</a></li>
<li class="chapter" data-level="12.7.4" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#pushing-the-commits-to-github"><i class="fa fa-check"></i><b>12.7.4</b> Pushing the commits to GitHub</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#collaboration"><i class="fa fa-check"></i><b>12.8</b> Collaboration</a>
<ul>
<li class="chapter" data-level="12.8.1" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#giving-collaborators-access-to-your-project"><i class="fa fa-check"></i><b>12.8.1</b> Giving collaborators access to your project</a></li>
<li class="chapter" data-level="12.8.2" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#pulling-changes-from-github-using-jupyter"><i class="fa fa-check"></i><b>12.8.2</b> Pulling changes from GitHub using Jupyter</a></li>
<li class="chapter" data-level="12.8.3" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#handling-merge-conflicts"><i class="fa fa-check"></i><b>12.8.3</b> Handling merge conflicts</a></li>
<li class="chapter" data-level="12.8.4" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#communicating-using-github-issues"><i class="fa fa-check"></i><b>12.8.4</b> Communicating using GitHub issues</a></li>
</ul></li>
<li class="chapter" data-level="12.9" data-path="Getting-started-with-version-control.html"><a href="Getting-started-with-version-control.html#vc-add-res"><i class="fa fa-check"></i><b>12.9</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html"><i class="fa fa-check"></i><b>13</b> Setting up your computer</a>
<ul>
<li class="chapter" data-level="13.1" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#overview-13"><i class="fa fa-check"></i><b>13.1</b> Overview</a></li>
<li class="chapter" data-level="13.2" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#chapter-learning-objectives-12"><i class="fa fa-check"></i><b>13.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="13.3" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#installing-software-on-your-own-computer"><i class="fa fa-check"></i><b>13.3</b> Installing software on your own computer</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#git"><i class="fa fa-check"></i><b>13.3.1</b> Git</a></li>
<li class="chapter" data-level="13.3.2" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#miniconda"><i class="fa fa-check"></i><b>13.3.2</b> Miniconda</a></li>
<li class="chapter" data-level="13.3.3" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#jupyterlab"><i class="fa fa-check"></i><b>13.3.3</b> JupyterLab</a></li>
<li class="chapter" data-level="13.3.4" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#r-and-the-irkernel"><i class="fa fa-check"></i><b>13.3.4</b> R and the IRkernel</a></li>
<li class="chapter" data-level="13.3.5" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#r-packages"><i class="fa fa-check"></i><b>13.3.5</b> R packages</a></li>
<li class="chapter" data-level="13.3.6" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#latex"><i class="fa fa-check"></i><b>13.3.6</b> LaTeX</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="move-to-your-own-machine.html"><a href="move-to-your-own-machine.html#finishing-up-installation"><i class="fa fa-check"></i><b>13.4</b> Finishing up installation</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendixA.html"><a href="appendixA.html"><i class="fa fa-check"></i><b>A</b> Download files from a JupyterHub for later local use</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science: A First Introduction</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="viz" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Effective data visualization</h1>
<div id="overview-3" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Overview</h2>
<p>This chapter will introduce concepts and tools relating to data visualization
beyond what we have seen and practiced so far. We will focus on guiding
principles for effective data visualization and explaining visualizations
independent of any particular tool or programming language. In the process, we
will cover some specifics of creating visualizations (scatter plots, bar
charts, line graphs, and histograms) for data using R.</p>
</div>
<div id="chapter-learning-objectives-3" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Chapter learning objectives</h2>
<p>By the end of the chapter, readers will be able to:</p>
<ul>
<li>Describe when to use the following kinds of visualizations to answer specific questions using a data set:
<ul>
<li>scatter plots</li>
<li>line plots</li>
<li>bar plots</li>
<li>histogram plots</li>
</ul></li>
<li>Given a data set and a question, select from the above plot types and use R to create a visualization that best answers the question</li>
<li>Given a visualization and a question, evaluate the effectiveness of the visualization and suggest improvements to better answer the question</li>
<li>Referring to the visualization, communicate the conclusions in non-technical terms</li>
<li>Identify rules of thumb for creating effective visualizations</li>
<li>Define the three key aspects of ggplot objects:
<ul>
<li>aesthetic mappings</li>
<li>geometric objects</li>
<li>scales</li>
</ul></li>
<li>Use the <code>ggplot2</code> package in R to create and refine the above visualizations using:
<ul>
<li>geometric objects: <code>geom_point</code>, <code>geom_line</code>, <code>geom_histogram</code>, <code>geom_bar</code>, <code>geom_vline</code>, <code>geom_hline</code></li>
<li>scales: <code>scale_x_continuous</code>, <code>scale_y_continuous</code></li>
<li>aesthetic mappings: <code>x</code>, <code>y</code>, <code>fill</code>, <code>colour</code>, <code>shape</code></li>
<li>labelling: <code>xlab</code>, <code>ylab</code>, <code>labs</code></li>
<li>font control and legend positioning: <code>theme</code></li>
<li>subplots: <code>facet_grid</code></li>
</ul></li>
<li>Describe the difference in raster and vector output formats</li>
<li>Use <code>ggsave</code> to save visualizations in <code>.png</code> and <code>.svg</code> format</li>
</ul>
</div>
<div id="choosing-the-visualization" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Choosing the visualization</h2>
<div id="ask-a-question-and-answer-it" class="section level4" number="4.3.0.1">
<h4><span class="header-section-number">4.3.0.1</span> <em>Ask a question, and answer it</em></h4>
<p>The purpose of a visualization is to answer a question about a data set of interest. So naturally, the first thing to do <strong>before</strong> creating a visualization is to formulate the question about the data you are trying to answer.
A good visualization will clearly answer your question without distraction; a <em>great</em> visualization will suggest even what the question
was itself without additional explanation. Imagine your visualization as part of a poster presentation for a project; even if you aren’t standing
at the poster explaining things, an effective visualization will convey your message to the audience.</p>
<p>Recall <a href="index.html#chapter-learning-objectives">the different data analysis questions</a> from the first chapter. With the visualizations
we will cover in this chapter, we will be able to answer <em>only descriptive and exploratory</em> questions. Be careful not to try to answer any <em>predictive, inferential, causal or mechanistic</em>
questions, as we have not learned the tools necessary to do that properly just yet.</p>
<p>As with most coding tasks, it is totally fine (and quite common) to make mistakes and iterate a few times before you find the right visualization for your data and question. There are <a href="https://serialmentor.com/dataviz/directory-of-visualizations.html">many different kinds of plotting graphics</a> available to use. For the kinds we will introduce in this book, the general rules of thumb are:</p>
<ul>
<li><strong>line plots</strong> visualize trends with respect to an independent, ordered quantity (e.g. time)</li>
<li><strong>histograms</strong> visualize the distribution of one quantitative variable (i.e., all its possible values and how often they occur)</li>
<li><strong>scatter plots</strong> visualize the distribution / relationship of two quantitative variables</li>
<li><strong>bar plots</strong> visualize comparisons of amounts</li>
</ul>
<p>All types of visualization have their (mis)uses, but three kinds are usually hard to understand or are easily replaced with an oft-better alternative.
In particular, you should avoid <strong>pie charts</strong>; it is generally better to use bars, as it is easier to compare bar heights than pie slice sizes.
You should also not use <strong>3-D visualizations</strong>, as they are typically hard to understand when converted to a static 2-D image format. Finally,
do not use tables to make numerical comparisons; humans are much better at quickly processing visual information than text and math. Bar plots are again typically a better alternative.</p>
</div>
</div>
<div id="refining-the-visualization" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Refining the visualization</h2>
<div id="convey-the-message-minimize-noise" class="section level4" number="4.4.0.1">
<h4><span class="header-section-number">4.4.0.1</span> <em>Convey the message, minimize noise</em></h4>
<p>Just being able to make a visualization in R with <code>ggplot2</code> (or any other tool for that matter) doesn’t mean that it effectively communicates your message to others. Once you have selected a broad type of visualization to use, you will have to refine it to suit your particular need.
Some rules of thumb for doing this are listed below. They generally fall into two classes: you want to <em>make your
visualization convey your message</em>, and you want to <em>reduce visual noise</em> as much as possible. Humans have limited cognitive ability
to process information; both of these types of refinement aim to reduce the mental load on your audience when viewing your visualization,
making it easier for them to understand and remember your message quickly.</p>
<p><strong>Convey the message</strong></p>
<ul>
<li>Make sure the visualization answers the question you have asked most simply and plainly as possible.</li>
<li>Use legends and labels so that your visualization is understandable without reading the surrounding text.</li>
<li>Ensure the text, symbols, lines, etc., on your visualization are big enough to be easily read.</li>
<li>Ensure the data are clearly visible; don’t hide the shape/distribution of the data behind other objects (e.g. a bar).</li>
<li>Make sure to use colour schemes that are understandable by those with colourblindness (a surprisingly large fraction of the overall population). For example, <a href="https://colorbrewer2.org">colorbrewer.org</a> and the <code>RColorBrewer</code> R package provide the ability to pick such colour schemes, and you can check your visualizations after you have created them by uploading to online tools such as the <a href="https://www.color-blindness.com/coblis-color-blindness-simulator/">colour blindness simulator</a>.</li>
<li>Redundancy can be helpful; sometimes conveying the same message in multiple ways reinforces it for the audience.</li>
</ul>
<p><strong>Minimize noise</strong></p>
<ul>
<li>Use colours sparingly. Too many different colours can be distracting, create false patterns, and detract from the message.</li>
<li>Be wary of overplotting. If your plot has too many dots or lines and starts to look like a mess, you need to do something different.</li>
<li>Only make the plot area (where the dots, lines, bars are) as big as needed. Simple plots can be made small.</li>
<li>Don’t adjust the axes to zoom in on small differences. If the difference is small, show that it’s small!</li>
</ul>
</div>
</div>
<div id="creating-visualizations-with-ggplot2" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Creating visualizations with <code>ggplot2</code></h2>
<div id="build-the-visualization-iteratively" class="section level4" number="4.5.0.1">
<h4><span class="header-section-number">4.5.0.1</span> <em>Build the visualization iteratively</em></h4>
<p>This section will cover examples of how to choose and refine a visualization given a data set and a question that you want to answer,
and then how to create the visualization in R using <code>ggplot2</code>. To use the <code>ggplot2</code> package, we need to load the <code>tidyverse</code> metapackage.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="viz.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="the-mauna-loa-co2-data-set" class="section level3" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> The Mauna Loa CO2 data set</h3>
<p>The <a href="https://www.esrl.noaa.gov/gmd/ccgg/trends/data.html">Mauna Loa CO2 data set</a>, curated by <a href="https://www.esrl.noaa.gov/gmd/staff/Pieter.Tans/">Dr. Pieter Tans, NOAA/GML</a> and <a href="https://scrippsco2.ucsd.edu/">Dr. Ralph Keeling, Scripps Institution of Oceanography</a>
records the atmospheric concentration of carbon dioxide (CO2, in parts per million) at the Mauna Loa research station in Hawaii from 1959 onwards <span class="citation">(<a href="#ref-maunadata" role="doc-biblioref">Tans and Keeling 2020</a>)</span>.</p>
<p><strong>Question:</strong> Does the concentration of atmospheric CO2 change over time, and are there any interesting patterns to note?</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="viz.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mauna loa carbon dioxide data</span></span>
<span id="cb180-2"><a href="viz.html#cb180-2" aria-hidden="true" tabindex="-1"></a>co2_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/mauna_loa.csv&quot;</span>) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb180-3"><a href="viz.html#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ppm <span class="sc">&gt;</span> <span class="dv">0</span>, date_decimal <span class="sc">&lt;</span> <span class="dv">2000</span>)</span>
<span id="cb180-4"><a href="viz.html#cb180-4" aria-hidden="true" tabindex="-1"></a>co2_df</span></code></pre></div>
<pre><code>## # A tibble: 495 x 4
##     year month date_decimal    ppm
##    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;
##  1  1958     3       1958.2 315.71
##  2  1958     4       1958.3 317.45
##  3  1958     5       1958.4 317.5 
##  4  1958     7       1958.5 315.86
##  5  1958     8       1958.6 314.93
##  6  1958     9       1958.7 313.2 
##  7  1958    11       1958.9 313.33
##  8  1958    12       1959.0 314.67
##  9  1959     1       1959.0 315.62
## 10  1959     2       1959.1 316.38
## # … with 485 more rows</code></pre>
<p>Since we are investigating a relationship between two variables (CO2 concentration and date), a scatter plot is a good place to start. Scatter plots
show the data as individual points with <code>x</code> (horizontal axis) and <code>y</code> (vertical axis) coordinates. Here, we will use the decimal
date as the <code>x</code> coordinate
and CO2 concentration as the <code>y</code> coordinate. When using the <code>ggplot2</code> package, we create the plot object with the <code>ggplot</code> function; there are
a few basic aspects of a plot that we need to specify:</p>
<ul>
<li>the <em>data</em>: the name of the data frame object that we would like to visualize
<ul>
<li>here, we specify the <code>co2_df</code> data frame</li>
</ul></li>
<li>the <em>aesthetic mapping</em>: tells <code>ggplot</code> how the columns in the data frame map to properties of the visualization
<ul>
<li>to create an aesthetic mapping, we use the <code>aes</code> function</li>
<li>here, we set the plot <code>x</code> axis to the <code>date_decimal</code> variable, and the plot <code>y</code> axis to the <code>ppm</code> variable</li>
</ul></li>
<li>the <em>geometric object</em>: specifies how the mapped data should be displayed
<ul>
<li>to create a geometric object, we use a <code>geom_*</code> function (see the <a href="https://ggplot2.tidyverse.org/reference/">ggplot reference</a> for a list of geometric objects)</li>
<li>here, we use the <code>geom_point</code> function to visualize our data as a scatterplot</li>
</ul></li>
</ul>
We can see in Figure <a href="viz.html#fig:03-ggplot-function-scatter">4.1</a> how each of these aspects map to our code for creating a basic scatter plot for our <code>co2_df</code> data.
<div class="figure"><span id="fig:03-ggplot-function-scatter"></span>
<img src="img/ggplot_function_scatter.jpeg" alt="Creating a scatterplot with the ggplot function" width="946" />
<p class="caption">
Figure 4.1: Creating a scatterplot with the ggplot function
</p>
</div>
<p>We could pass many other possible arguments to the aesthetic mapping and geometric object to change how the plot looks. For
the purposes of quickly testing things out to see what they look like, though, we can just go with the default settings:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="viz.html#cb182-1" aria-hidden="true" tabindex="-1"></a>co2_scatter <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(co2_df, <span class="fu">aes</span>(<span class="at">x =</span> date_decimal, <span class="at">y =</span> ppm)) <span class="sc">+</span></span>
<span id="cb182-2"><a href="viz.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb182-3"><a href="viz.html#cb182-3" aria-hidden="true" tabindex="-1"></a>co2_scatter</span></code></pre></div>
<div class="figure"><span id="fig:03-data-co2-scatter"></span>
<img src="_main_files/figure-html/03-data-co2-scatter-1.png" alt="Scatter plot of atmospheric concentration of CO2 over time" width="672" />
<p class="caption">
Figure 4.2: Scatter plot of atmospheric concentration of CO2 over time
</p>
</div>
<p>Certainly, the visualization in Figure <a href="viz.html#fig:03-data-co2-scatter">4.2</a> shows a clear upward trend in the atmospheric concentration of CO2 over time.
This plot answers the first part of our question in the affirmative, but that appears to be the only conclusion one can make from the scatter visualization.
However, since time is an ordered quantity, we can try using a line plot instead using the <code>geom_line</code> function. Line plots require
that their <code>x</code> coordinate orders the data, and connect the sequence of <code>x</code> and <code>y</code> coordinates with line segments. Let’s again try this with just
the default arguments:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="viz.html#cb183-1" aria-hidden="true" tabindex="-1"></a>co2_line <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(co2_df, <span class="fu">aes</span>(<span class="at">x =</span> date_decimal, <span class="at">y =</span> ppm)) <span class="sc">+</span></span>
<span id="cb183-2"><a href="viz.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb183-3"><a href="viz.html#cb183-3" aria-hidden="true" tabindex="-1"></a>co2_line</span></code></pre></div>
<div class="figure"><span id="fig:03-data-co2-line"></span>
<img src="_main_files/figure-html/03-data-co2-line-1.png" alt="Line plot of atmospheric concentration of CO2 over time" width="672" />
<p class="caption">
Figure 4.3: Line plot of atmospheric concentration of CO2 over time
</p>
</div>
<p>Aha! Figure <a href="viz.html#fig:03-data-co2-line">4.3</a> shows us there <em>is</em> another interesting phenomenon in the data: in addition to increasing over time, the concentration seems to oscillate as well.
Given the visualization as it is now, it is still hard to tell how fast the oscillation is, but nevertheless, the line seems to
be a better choice for answering the question than the scatter plot was. The comparison between these two visualizations illustrates a common issue with
scatter plots: often, the points are shown too close together or even on top of one another, muddling information that would otherwise be clear (<em>overplotting</em>).</p>
<p>Now that we have settled on the rough details of the visualization, it is time to refine things. This plot is fairly straightforward, and there is not much
visual noise to remove. But there are a few things we must do to improve clarity, such as adding informative axis labels and making the font a more readable size.
To add axis labels, we use the <code>xlab</code> and <code>ylab</code> functions. To change the font size, we use the <code>theme</code> function with the <code>text</code> argument:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="viz.html#cb184-1" aria-hidden="true" tabindex="-1"></a>co2_line <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(co2_df, <span class="fu">aes</span>(<span class="at">x =</span> date_decimal, <span class="at">y =</span> ppm)) <span class="sc">+</span></span>
<span id="cb184-2"><a href="viz.html#cb184-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb184-3"><a href="viz.html#cb184-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-4"><a href="viz.html#cb184-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Atmospheric CO2 (ppm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-5"><a href="viz.html#cb184-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span>
<span id="cb184-6"><a href="viz.html#cb184-6" aria-hidden="true" tabindex="-1"></a>co2_line</span></code></pre></div>
<div class="figure"><span id="fig:03-data-co2-line-2"></span>
<img src="_main_files/figure-html/03-data-co2-line-2-1.png" alt="Line plot of atmospheric concentration of CO2 over time with clearer axes and labels" width="672" />
<p class="caption">
Figure 4.4: Line plot of atmospheric concentration of CO2 over time with clearer axes and labels
</p>
</div>
<p>Finally, let’s see if we can better understand the oscillation by changing the visualization slightly. Note that it is totally fine to use a small number of visualizations to answer different aspects of the question you are trying to answer. We will accomplish
this by using <em>scales</em>, another important feature of <code>ggplot2</code> that easily transforms the different variables and set limits.
We scale the horizontal axis using the <code>scale_x_continuous</code> function, and the vertical axis with the <code>scale_y_continuous</code> function.
We can transform the axis by passing the <code>trans</code> argument, and set limits by passing the <code>limits</code> argument. In particular, here, we
will use the <code>scale_x_continuous</code> function with the <code>limits</code> argument to zoom in on just five years of data (say, 1990-1995):</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="viz.html#cb185-1" aria-hidden="true" tabindex="-1"></a>co2_line <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(co2_df, <span class="fu">aes</span>(<span class="at">x =</span> date_decimal, <span class="at">y =</span> ppm)) <span class="sc">+</span></span>
<span id="cb185-2"><a href="viz.html#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb185-3"><a href="viz.html#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb185-4"><a href="viz.html#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Atmospheric CO2 (ppm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb185-5"><a href="viz.html#cb185-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>)) <span class="sc">+</span></span>
<span id="cb185-6"><a href="viz.html#cb185-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span>
<span id="cb185-7"><a href="viz.html#cb185-7" aria-hidden="true" tabindex="-1"></a>co2_line</span></code></pre></div>
<div class="figure"><span id="fig:03-data-co2-line-3"></span>
<img src="_main_files/figure-html/03-data-co2-line-3-1.png" alt="Line plot of atmospheric concentration of CO2 from 1990 to 1995 only" width="672" />
<p class="caption">
Figure 4.5: Line plot of atmospheric concentration of CO2 from 1990 to 1995 only
</p>
</div>
<p>Interesting! It seems that each year, the atmospheric CO2 increases until it reaches its peak somewhere around April, decreases until around late September,
and finally increases again until the end of the year. In Hawaii, there are two seasons: summer from May through October, and winter from November through April.
Therefore, the oscillating pattern in CO2 matches up fairly closely with the two seasons.</p>
</div>
<div id="the-island-landmass-data-set" class="section level3" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> The island landmass data set</h3>
<p>The <code>islands.csv</code> data set contains a list of Earth’s landmasses as well as their area (in thousands of square miles) <span class="citation">(<a href="#ref-islandsdata" role="doc-biblioref">McNeil 1977</a>)</span>.</p>
<p><strong>Question:</strong> Are the continents (North / South America, Africa, Europe, Asia, Australia, Antarctica) Earth’s seven largest landmasses? If so, what are the next few largest landmasses after those?</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="viz.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># islands data</span></span>
<span id="cb186-2"><a href="viz.html#cb186-2" aria-hidden="true" tabindex="-1"></a>islands_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/islands.csv&quot;</span>)</span>
<span id="cb186-3"><a href="viz.html#cb186-3" aria-hidden="true" tabindex="-1"></a>islands_df</span></code></pre></div>
<pre><code>## # A tibble: 48 x 2
##    landmass      size
##    &lt;chr&gt;        &lt;dbl&gt;
##  1 Africa       11506
##  2 Antarctica    5500
##  3 Asia         16988
##  4 Australia     2968
##  5 Axel Heiberg    16
##  6 Baffin         184
##  7 Banks           23
##  8 Borneo         280
##  9 Britain         84
## 10 Celebes         73
## # … with 38 more rows</code></pre>
<p>Here, we have a list of Earth’s landmasses, and are trying to compare their sizes. The right type of visualization to answer this
question is a bar plot, specified by the <code>geom_bar</code> function in <code>ggplot2</code>. However, by default, <code>geom_bar</code> sets the heights
of bars to the number of times a value appears in a data frame (its <em>count</em>); here, we want to plot exactly the values in the data frame, i.e.,
the landmass sizes. So we have to pass the <code>stat = "identity"</code> argument to <code>geom_bar</code>:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="viz.html#cb188-1" aria-hidden="true" tabindex="-1"></a>islands_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(islands_df, <span class="fu">aes</span>(<span class="at">x =</span> landmass, <span class="at">y =</span> size)) <span class="sc">+</span></span>
<span id="cb188-2"><a href="viz.html#cb188-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)</span>
<span id="cb188-3"><a href="viz.html#cb188-3" aria-hidden="true" tabindex="-1"></a>islands_bar</span></code></pre></div>
<div class="figure"><span id="fig:03-data-islands-bar"></span>
<img src="_main_files/figure-html/03-data-islands-bar-1.png" alt="Bar plot of all Earth's landmasses' size with squished labels" width="672" />
<p class="caption">
Figure 4.6: Bar plot of all Earth’s landmasses’ size with squished labels
</p>
</div>
<p>Alright, not bad! The plot in Figure <a href="viz.html#fig:03-data-islands-bar">4.6</a> is definitely the right kind of visualization, as we can clearly see and compare sizes of landmasses. The major issues are that the smaller landmasses’ sizes are hard to distinguish, and the names of the landmasses are obscuring each other as they have been squished into too little space. But remember that the question we asked was only about the largest landmasses; let’s make the plot a little bit clearer by keeping only the largest 12 landmasses. We do this using the <code>slice_max</code> function.
Then to help us make sure the labels have enough space, we’ll use horizontal bars instead of vertical ones. We do this by swapping the <code>x</code> and <code>y</code> variables:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="viz.html#cb189-1" aria-hidden="true" tabindex="-1"></a>islands_top12 <span class="ot">&lt;-</span> <span class="fu">slice_max</span>(islands_df, <span class="at">order_by =</span> size, <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb189-2"><a href="viz.html#cb189-2" aria-hidden="true" tabindex="-1"></a>islands_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(islands_top12, <span class="fu">aes</span>(<span class="at">x =</span> size, <span class="at">y =</span> landmass)) <span class="sc">+</span></span>
<span id="cb189-3"><a href="viz.html#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) </span>
<span id="cb189-4"><a href="viz.html#cb189-4" aria-hidden="true" tabindex="-1"></a>islands_bar</span></code></pre></div>
<div class="figure"><span id="fig:03-data-islands-bar-2"></span>
<img src="_main_files/figure-html/03-data-islands-bar-2-1.png" alt="Bar plot of size for Earth's largest 12 landmasses" width="672" />
<p class="caption">
Figure 4.7: Bar plot of size for Earth’s largest 12 landmasses
</p>
</div>
<p>The plot in Figure <a href="viz.html#fig:03-data-islands-bar-2">4.7</a> is definitely clearer now, and allows us to answer our question (“are the top 7 largest landmasses continents?”) in
the affirmative. But the question could be made clearer from the plot by organizing the bars not by alphabetical order
but by size, and to colour them based on whether they are a continent. To do this, we
use <code>mutate</code> to add a column to the data regarding whether or not the landmass is a continent:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="viz.html#cb190-1" aria-hidden="true" tabindex="-1"></a>islands_top12 <span class="ot">&lt;-</span> <span class="fu">slice_max</span>(islands_df, <span class="at">order_by =</span> size, <span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb190-2"><a href="viz.html#cb190-2" aria-hidden="true" tabindex="-1"></a>continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Africa&quot;</span>, <span class="st">&quot;Antarctica&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;North America&quot;</span>, <span class="st">&quot;South America&quot;</span>)</span>
<span id="cb190-3"><a href="viz.html#cb190-3" aria-hidden="true" tabindex="-1"></a>islands_ct <span class="ot">&lt;-</span> <span class="fu">mutate</span>(islands_top12, <span class="at">is_continent =</span> <span class="fu">ifelse</span>(landmass <span class="sc">%in%</span> continents, <span class="st">&quot;Continent&quot;</span>, <span class="st">&quot;Other&quot;</span>))</span>
<span id="cb190-4"><a href="viz.html#cb190-4" aria-hidden="true" tabindex="-1"></a>islands_ct</span></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##    landmass       size is_continent
##    &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;       
##  1 Asia          16988 Continent   
##  2 Africa        11506 Continent   
##  3 North America  9390 Continent   
##  4 South America  6795 Continent   
##  5 Antarctica     5500 Continent   
##  6 Europe         3745 Continent   
##  7 Australia      2968 Continent   
##  8 Greenland       840 Other       
##  9 New Guinea      306 Other       
## 10 Borneo          280 Other       
## 11 Madagascar      227 Other       
## 12 Baffin          184 Other</code></pre>
<p>In order to colour the bars, we add the <code>fill</code> argument to the aesthetic mapping. Then we use the <code>reorder</code>
function in the aesthetic mapping to organize the landmasses by their <code>size</code> variable.
Finally, we use the <code>labs</code> and <code>theme</code> functions to add labels, change the font size, and position the legend:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="viz.html#cb192-1" aria-hidden="true" tabindex="-1"></a>islands_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(islands_ct, <span class="fu">aes</span>(<span class="at">x =</span> size, <span class="at">y =</span> <span class="fu">reorder</span>(landmass, size), <span class="at">fill =</span> is_continent)) <span class="sc">+</span></span>
<span id="cb192-2"><a href="viz.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb192-3"><a href="viz.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Size (1000 square mi)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Landmass&quot;</span>,  <span class="at">fill =</span> <span class="st">&quot;Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb192-4"><a href="viz.html#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>), <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.45</span>))</span>
<span id="cb192-5"><a href="viz.html#cb192-5" aria-hidden="true" tabindex="-1"></a>islands_bar</span></code></pre></div>
<div class="figure"><span id="fig:03-data-islands-bar-4"></span>
<img src="_main_files/figure-html/03-data-islands-bar-4-1.png" alt="Bar plot of size for Earth's largest 12 landmasses coloured by whether its a continent with clearer axes and labels" width="672" />
<p class="caption">
Figure 4.8: Bar plot of size for Earth’s largest 12 landmasses coloured by whether its a continent with clearer axes and labels
</p>
</div>
<p>The plot in Figure <a href="viz.html#fig:03-data-islands-bar-4">4.8</a> is now a very effective visualization for answering our original questions. Landmasses are organized by their size,
and continents are coloured differently than other landmasses, making it quite clear that continents are the largest seven landmasses.</p>
</div>
<div id="the-old-faithful-eruptionwaiting-time-data-set" class="section level3" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> The Old Faithful eruption/waiting time data set</h3>
<p>The <code>faithful</code> data set contains measurements of the waiting time between eruptions and the subsequent eruption duration (in minutes). The <code>faithful</code> data set is available in base R under the name <code>faithful</code> so it does not need to be loaded.</p>
<p><strong>Question:</strong> Is there a relationship between the waiting time before an eruption to the duration of the eruption?</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="viz.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># old faithful eruption time / wait time data</span></span>
<span id="cb193-2"><a href="viz.html#cb193-2" aria-hidden="true" tabindex="-1"></a>faithful</span></code></pre></div>
<pre><code>## # A tibble: 272 x 2
##    eruptions waiting
##        &lt;dbl&gt;   &lt;dbl&gt;
##  1     3.6        79
##  2     1.8        54
##  3     3.333      74
##  4     2.283      62
##  5     4.533      85
##  6     2.883      55
##  7     4.7        88
##  8     3.6        85
##  9     1.95       51
## 10     4.35       85
## # … with 262 more rows</code></pre>
<p>Here again, we investigate the relationship between two quantitative variables (waiting time and eruption time). But if you look at the output of the data frame, you’ll notice that neither of the columns are ordered. So, in this case, let’s start again with a scatter plot:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="viz.html#cb195-1" aria-hidden="true" tabindex="-1"></a>faithful_scatter <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(faithful, <span class="fu">aes</span>(<span class="at">x =</span> waiting, <span class="at">y =</span> eruptions)) <span class="sc">+</span></span>
<span id="cb195-2"><a href="viz.html#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb195-3"><a href="viz.html#cb195-3" aria-hidden="true" tabindex="-1"></a>faithful_scatter</span></code></pre></div>
<div class="figure"><span id="fig:03-data-faithful-scatter"></span>
<img src="_main_files/figure-html/03-data-faithful-scatter-1.png" alt="Scatter plot of waiting time and eruption time" width="672" />
<p class="caption">
Figure 4.9: Scatter plot of waiting time and eruption time
</p>
</div>
<p>We can see in Figure <a href="viz.html#fig:03-data-faithful-scatter">4.9</a> the data tend to fall into two groups: one with short waiting and eruption times, and one with long waiting and eruption
times. Note that in this case, there is no overplotting: the points are generally nicely visually separated, and the pattern they form is clear.
In order to refine the visualization, we need only to add axis labels and make the font more readable:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="viz.html#cb196-1" aria-hidden="true" tabindex="-1"></a>faithful_scatter <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(faithful, <span class="fu">aes</span>(<span class="at">x =</span> waiting, <span class="at">y =</span> eruptions)) <span class="sc">+</span></span>
<span id="cb196-2"><a href="viz.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb196-3"><a href="viz.html#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Waiting Time (mins)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Eruption Duration (mins)&quot;</span>) <span class="sc">+</span></span>
<span id="cb196-4"><a href="viz.html#cb196-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span>
<span id="cb196-5"><a href="viz.html#cb196-5" aria-hidden="true" tabindex="-1"></a>faithful_scatter</span></code></pre></div>
<div class="figure"><span id="fig:03-data-faithful-scatter-2"></span>
<img src="_main_files/figure-html/03-data-faithful-scatter-2-1.png" alt="Scatter plot of waiting time and eruption time with clearer axes and labels" width="672" />
<p class="caption">
Figure 4.10: Scatter plot of waiting time and eruption time with clearer axes and labels
</p>
</div>
</div>
<div id="the-canadian-languages-data-set" class="section level3" number="4.5.4">
<h3><span class="header-section-number">4.5.4</span> The Canadian languages data set</h3>
<p>We will return to the <code>can_lang</code> data set <span class="citation">(<a href="#ref-timbers2020canlang" role="doc-biblioref">Timbers 2020</a>)</span>, which contains counts of languages from the 2016 Canadian census.</p>
<p><strong>Question:</strong> Is there a relationship between the number of people who speak a language as their mother tongue and the number of people who speak that language as their primary spoken language at home? And is there a pattern in the strength of this relationship in the higher-level language categories (Official languages, Aboriginal languages, or non-official and non-Aboriginal languages)?</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="viz.html#cb197-1" aria-hidden="true" tabindex="-1"></a>can_lang <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/can_lang.csv&quot;</span>)</span>
<span id="cb197-2"><a href="viz.html#cb197-2" aria-hidden="true" tabindex="-1"></a>can_lang</span></code></pre></div>
<pre><code>## # A tibble: 214 x 6
##    category                   language             mother_tongue most_at_home most_at_work lang_known
##    &lt;chr&gt;                      &lt;chr&gt;                        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;
##  1 Aboriginal languages       Aboriginal language…           590          235           30        665
##  2 Non-Official &amp; Non-Aborig… Afrikaans                    10260         4785           85      23415
##  3 Non-Official &amp; Non-Aborig… Afro-Asiatic langua…          1150          445           10       2775
##  4 Non-Official &amp; Non-Aborig… Akan (Twi)                   13460         5985           25      22150
##  5 Non-Official &amp; Non-Aborig… Albanian                     26895        13135          345      31930
##  6 Aboriginal languages       Algonquian language…            45           10            0        120
##  7 Aboriginal languages       Algonquin                     1260          370           40       2480
##  8 Non-Official &amp; Non-Aborig… American Sign Langu…          2685         3020         1145      21930
##  9 Non-Official &amp; Non-Aborig… Amharic                      22465        12785          200      33670
## 10 Non-Official &amp; Non-Aborig… Arabic                      419890       223535         5585     629055
## # … with 204 more rows</code></pre>
<p>We will begin with a scatter plot of the <code>mother_tongue</code> and <code>most_at_home</code> columns from our data frame.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="viz.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(<span class="at">x =</span> most_at_home, <span class="at">y =</span> mother_tongue)) <span class="sc">+</span></span>
<span id="cb199-2"><a href="viz.html#cb199-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span id="fig:03-mother-tongue-vs-most-at-home"></span>
<img src="_main_files/figure-html/03-mother-tongue-vs-most-at-home-1.png" alt="Scatter plot of number of Canadians reporting a language as their mother tongue vs the primary language at home" width="552" />
<p class="caption">
Figure 4.11: Scatter plot of number of Canadians reporting a language as their mother tongue vs the primary language at home
</p>
</div>
<p>To improve the interpretability of the data visualization in Figure <a href="viz.html#fig:03-mother-tongue-vs-most-at-home">4.11</a> we should replace the default axis names with a more informative labels. We can use <code>\n</code> to create a line break in the axis names so the words after <code>\n</code> are printed on a new line. This will make the axes labels on the plots more readable.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="viz.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(<span class="at">x =</span> most_at_home, <span class="at">y =</span> mother_tongue)) <span class="sc">+</span></span>
<span id="cb200-2"><a href="viz.html#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb200-3"><a href="viz.html#cb200-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Language spoken most at home </span><span class="sc">\n</span><span class="st"> (number of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb200-4"><a href="viz.html#cb200-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mother tongue </span><span class="sc">\n</span><span class="st"> (number of Canadian residents)&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:03-mother-tongue-vs-most-at-home-labs"></span>
<img src="_main_files/figure-html/03-mother-tongue-vs-most-at-home-labs-1.png" alt="Scatter plot of number of Canadians reporting a language as their mother tongue vs the primary language at home with x and y labels" width="552" />
<p class="caption">
Figure 4.12: Scatter plot of number of Canadians reporting a language as their mother tongue vs the primary language at home with x and y labels
</p>
</div>
<p>Most of the data points from the 214 observations in this data set are bunched up in the lower left-handside of the visualization in Figure <a href="viz.html#fig:03-mother-tongue-vs-most-at-home-labs">4.12</a>. The data is clumped because many more people in Canada speak the two languages represented by the points in the upper right corner. By filtering the data, we can confirm these two points correspond to the two official languages (English and French):</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="viz.html#cb201-1" aria-hidden="true" tabindex="-1"></a>can_lang <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb201-2"><a href="viz.html#cb201-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(language <span class="sc">==</span> <span class="st">&quot;English&quot;</span> <span class="sc">|</span> language <span class="sc">==</span> <span class="st">&quot;French&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   category           language mother_tongue most_at_home most_at_work lang_known
##   &lt;chr&gt;              &lt;chr&gt;            &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;
## 1 Official languages English       19460850     22162865     15265335   29748265
## 2 Official languages French         7166700      6943800      3825215   10242945</code></pre>
<p>To answer our question, we will need to adjust the scale of the x and y axes so that they are on a log scale. Doing this can help make patterns in the data more interpretable.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="viz.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(<span class="at">x =</span> most_at_home, <span class="at">y =</span> mother_tongue)) <span class="sc">+</span></span>
<span id="cb203-2"><a href="viz.html#cb203-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb203-3"><a href="viz.html#cb203-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Language spoken most at home </span><span class="sc">\n</span><span class="st"> (number of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb203-4"><a href="viz.html#cb203-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mother tongue </span><span class="sc">\n</span><span class="st"> (number of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb203-5"><a href="viz.html#cb203-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb203-6"><a href="viz.html#cb203-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma)</span></code></pre></div>
<div class="figure"><span id="fig:03-mother-tongue-vs-most-at-home-scale"></span>
<img src="_main_files/figure-html/03-mother-tongue-vs-most-at-home-scale-1.png" alt="Scatter plot of number of Canadians reporting a language as their mother tongue vs the primary language at home with log adjusted x and y axes" width="552" />
<p class="caption">
Figure 4.13: Scatter plot of number of Canadians reporting a language as their mother tongue vs the primary language at home with log adjusted x and y axes
</p>
</div>
<blockquote>
<p>Here we are adjusting the scale of the x and y axes on a <span class="math inline">\(log\)</span> scale with base 10.
Notice that <span class="math inline">\(log_{10}(10) = 1\)</span>, <span class="math inline">\(log_{10}(100) = 2\)</span>, and <span class="math inline">\(log_{10}(1000) = 3\)</span>.
On the logarithmic scale, the values
10, 100 and 1000 are all the same distance apart so we see that applying this function
is moving big values closer together and moving small values farther apart.
Therefore by adjusting the scale in this way we are highlighting the differences between small values, which allows us to better see the relationship in Figure <a href="viz.html#fig:03-mother-tongue-vs-most-at-home-scale">4.13</a>.
Log transformations are not the only way you can transform the data! Notice if you write <code>log(0)</code> in R you get <code>-Inf</code> so if you have lots of zeros in your data you will want to do something else, which is beyond the scope of the book.</p>
</blockquote>
<p>From the visualization in Figure <a href="viz.html#fig:03-mother-tongue-vs-most-at-home-scale">4.13</a>, we see that for the 214 languages in this data set, as the number of people who have a language as their mother tongue increases, so does the number of people who speak that language at home. When we see two variables do this, we call this a <em>positive relationship</em>. Because the points are fairly close together, we can say that the relationship is strong. Because drawing a straight line through these points would fit the pattern we observe quite well, we say that it’s linear.</p>
<p>Similar to our example in chapter 1, we can convert the counts to percentages to make them more understandable. Changing the units allows us to better interpret the numbers in our data set. We can do this by dividing the number of people reporting a given language as their mother tongue or primary language at home by the number of people who live in Canada and multiplying by 100%. For example, the percentage of people who reported that their mother tongue was English in the
2016 Canadian census was 19,460,850 / 35,151,728 <span class="math inline">\(\times\)</span> 100 % =
55.4%.</p>
<p>Below we use <code>mutate</code> to calculate the percentage of people reporting a given language as their mother tongue and primary language at home for all the languages in the <code>can_lang</code> data set. Since the new columns are appended to the end of the data table, we selected the new columns after the transformation so you can clearly see the mutated output from the table.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="viz.html#cb204-1" aria-hidden="true" tabindex="-1"></a>can_lang <span class="ot">&lt;-</span> can_lang <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb204-2"><a href="viz.html#cb204-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb204-3"><a href="viz.html#cb204-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mother_tongue_percent =</span> (mother_tongue <span class="sc">/</span> <span class="dv">35151728</span>)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb204-4"><a href="viz.html#cb204-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">most_at_home_percent =</span> (most_at_home <span class="sc">/</span> <span class="dv">35151728</span>)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb204-5"><a href="viz.html#cb204-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb204-6"><a href="viz.html#cb204-6" aria-hidden="true" tabindex="-1"></a>can_lang <span class="sc">|</span><span class="er">&gt;</span> </span>
<span id="cb204-7"><a href="viz.html#cb204-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mother_tongue_percent, most_at_home_percent)</span></code></pre></div>
<pre><code>## # A tibble: 214 x 2
##    mother_tongue_percent most_at_home_percent
##                    &lt;dbl&gt;                &lt;dbl&gt;
##  1            0.0016784           0.00066853 
##  2            0.029188            0.013612   
##  3            0.0032715           0.0012659  
##  4            0.038291            0.017026   
##  5            0.076511            0.037367   
##  6            0.00012802          0.000028448
##  7            0.0035845           0.0010526  
##  8            0.0076383           0.0085913  
##  9            0.063909            0.036371   
## 10            1.1945              0.63591    
## # … with 204 more rows</code></pre>
<p>Finally, let’s visualize the data now that we have represented it as percentages (and change our axis labels to reflect this change in units!):</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="viz.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(<span class="at">x =</span> most_at_home_percent, <span class="at">y =</span> mother_tongue_percent)) <span class="sc">+</span></span>
<span id="cb206-2"><a href="viz.html#cb206-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb206-3"><a href="viz.html#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Language spoken most at home </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb206-4"><a href="viz.html#cb206-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mother tongue </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb206-5"><a href="viz.html#cb206-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb206-6"><a href="viz.html#cb206-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma)</span></code></pre></div>
<div class="figure"><span id="fig:03-mother-tongue-vs-most-at-home-scale-props"></span>
<img src="_main_files/figure-html/03-mother-tongue-vs-most-at-home-scale-props-1.png" alt="Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home" width="552" />
<p class="caption">
Figure 4.14: Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home
</p>
</div>
<p>Now we’ll move onto the second part of our exploratory data analysis question: when considering the relationship between the number of people who have a language as their mother tongue and the number of people who speak that language at home, is there a pattern in the strength of this relationship in the higher-level language categories (Official languages, Aboriginal languages, or non-official and non-Aboriginal languages)? One common way to explore this is to colour the data points on the scatter plot we have already created by group. For example, given that we have the higher-level language category for each language recorded in the 2016 Canadian census, we can colour the points in our previous
scatter plot to represent each language’s higher-level language category.</p>
<p>Here we want to distinguish the values according to the <code>category</code> group with which they belong.<br />
We can add an argument to the <code>aes</code> function, specifying that the <code>category</code> column should colour the points. Adding this argument will colour the points according to their group and add a legend at the side of the plot.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="viz.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(<span class="at">x =</span> most_at_home_percent, <span class="at">y =</span> mother_tongue_percent, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb207-2"><a href="viz.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb207-3"><a href="viz.html#cb207-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Language spoken most at home </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb207-4"><a href="viz.html#cb207-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mother tongue </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb207-5"><a href="viz.html#cb207-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb207-6"><a href="viz.html#cb207-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma)</span></code></pre></div>
<div class="figure"><span id="fig:03-scatter-colour-by-category"></span>
<img src="_main_files/figure-html/03-scatter-colour-by-category-1.png" alt="Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home coloured by language category" width="744" />
<p class="caption">
Figure 4.15: Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home coloured by language category
</p>
</div>
<p>In Figure <a href="viz.html#fig:03-scatter-colour-by-category">4.15</a>, the points are coloured with the default <code>ggplot2</code> colour palette. But what if you want to use different colours? In R, one package that provides alternative colour palettes is <code>RColorBrewer</code> <span class="citation">(<a href="#ref-RColorBrewer" role="doc-biblioref">Neuwirth 2014</a>)</span>. You can visualize the list of colour palettes that <code>RColorBrewer</code> has to offer with the <code>display.brewer.all()</code> function. You can also print a list of colour blind friendly palettes by adding <code>colorblindFriendly = T</code> to the function.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="viz.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb208-2"><a href="viz.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">colorblindFriendly =</span> T)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p>From the output above, we can choose the colour palette we want to use in our plot.
To change the colour palette, we add the <code>scale_colour_brewer()</code> layer indicating the palette we want to use.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="viz.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(<span class="at">x =</span> most_at_home_percent, <span class="at">y =</span> mother_tongue_percent, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb209-2"><a href="viz.html#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb209-3"><a href="viz.html#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Language spoken most at home </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb209-4"><a href="viz.html#cb209-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mother tongue </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb209-5"><a href="viz.html#cb209-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb209-6"><a href="viz.html#cb209-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span> </span>
<span id="cb209-7"><a href="viz.html#cb209-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;RdYlBu&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:scatter-colour-by-category-palette"></span>
<img src="_main_files/figure-html/scatter-colour-by-category-palette-1.png" alt="Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home coloured by language category with colour blind friendly colours" width="744" />
<p class="caption">
Figure 4.16: Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home coloured by language category with colour blind friendly colours
</p>
</div>
<p>You can use this <a href="https://www.color-blindness.com/coblis-color-blindness-simulator/">color blindness simulator</a> to check if your visualizations are colour blind friendly.</p>
<p>From the visualization in Figure <a href="viz.html#fig:scatter-colour-by-category-palette">4.16</a>, we can now clearly see that not just a lot, but that the majority of Canadians reported one of the official languages as their mother tongue and as the language they speak most often at home.</p>
<p>What do we see when considering the second part of our exploratory question? Do we see a difference in the pattern of the relationship between the number of people who speak a language as their mother tongue and the number of people who speak a language as their primary spoken language at home between higher-level language categories? Probably not!</p>
<p>For each higher-level language category, there appears to be a positive relationship between the number of people who speak a language as their mother tongue and the number of people who speak a language as their primary spoken language at home. This relationship looks similar, regardless of the category.</p>
<p>Does this mean that this relationship is positive for all languages in the world? Can we use this data visualization on its own to predict how many people have a given language as their mother tongue if we know how many people speak it as their primary language at home? The answer to both these questions is “no.” However, with exploratory data analysis, we can create new hypotheses, ideas, and questions (like the ones at the beginning of this paragraph). Answering those questions would likely involve gathering additional data and doing more complex analyses, which we will see more of later in this book.</p>
<p>Now, we can go one step further and distinguish English and French languages with different colours in our visualization. To separate these languages, we will filter the rows where the language is either English or French and mutate the <code>category</code> column to equal the corresponding language.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="viz.html#cb210-1" aria-hidden="true" tabindex="-1"></a>english_and_french <span class="ot">&lt;-</span> can_lang <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb210-2"><a href="viz.html#cb210-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(language <span class="sc">==</span> <span class="st">&quot;English&quot;</span> <span class="sc">|</span> language <span class="sc">==</span> <span class="st">&quot;French&quot;</span>) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb210-3"><a href="viz.html#cb210-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category =</span> language)</span>
<span id="cb210-4"><a href="viz.html#cb210-4" aria-hidden="true" tabindex="-1"></a>english_and_french</span></code></pre></div>
<pre><code>## # A tibble: 2 x 8
##   category language mother_tongue most_at_home most_at_work lang_known mother_tongue_percent
##   &lt;chr&gt;    &lt;chr&gt;            &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                 &lt;dbl&gt;
## 1 English  English       19460850     22162865     15265335   29748265                55.362
## 2 French   French         7166700      6943800      3825215   10242945                20.388
## # … with 1 more variable: most_at_home_percent &lt;dbl&gt;</code></pre>
<p>Next we will bind the mutated data set <code>english_and_french</code> that we just created with the remaining rows in the <code>can_lang</code> data set:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="viz.html#cb212-1" aria-hidden="true" tabindex="-1"></a>can_lang <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb212-2"><a href="viz.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  english_and_french,</span>
<span id="cb212-3"><a href="viz.html#cb212-3" aria-hidden="true" tabindex="-1"></a>  can_lang <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb212-4"><a href="viz.html#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(language <span class="sc">!=</span> <span class="st">&quot;English&quot;</span> <span class="sc">&amp;</span> language <span class="sc">!=</span> <span class="st">&quot;French&quot;</span>)</span>
<span id="cb212-5"><a href="viz.html#cb212-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>We have added a few more layers to make the data visualization in Figure <a href="viz.html#fig:03-nachos-to-cheesecake">4.17</a> even more effective. Specifically, we used have improved the visualizations accessibility by choosing colours that are easier to distinguish, mapped category to shape, and handled the problem of overlapping data points by making them slightly transparent.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="viz.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(can_lang, <span class="fu">aes</span>(</span>
<span id="cb213-2"><a href="viz.html#cb213-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> most_at_home_percent,</span>
<span id="cb213-3"><a href="viz.html#cb213-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> mother_tongue_percent,</span>
<span id="cb213-4"><a href="viz.html#cb213-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">colour =</span> category,</span>
<span id="cb213-5"><a href="viz.html#cb213-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">shape =</span> category</span>
<span id="cb213-6"><a href="viz.html#cb213-6" aria-hidden="true" tabindex="-1"></a>)) <span class="sc">+</span> <span class="co"># map categories to different shapes</span></span>
<span id="cb213-7"><a href="viz.html#cb213-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span> <span class="co"># set the transparency of the points</span></span>
<span id="cb213-8"><a href="viz.html#cb213-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Language spoken most at home </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb213-9"><a href="viz.html#cb213-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mother tongue </span><span class="sc">\n</span><span class="st"> (percentage of Canadian residents)&quot;</span>) <span class="sc">+</span></span>
<span id="cb213-10"><a href="viz.html#cb213-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb213-11"><a href="viz.html#cb213-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span> </span>
<span id="cb213-12"><a href="viz.html#cb213-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;RdYlBu&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:03-nachos-to-cheesecake"></span>
<img src="_main_files/figure-html/03-nachos-to-cheesecake-1.png" alt="Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home coloured by language category" width="744" />
<p class="caption">
Figure 4.17: Scatter plot of percentage of Canadians reporting a language as their mother tongue vs the primary language at home coloured by language category
</p>
</div>
</div>
<div id="the-michelson-speed-of-light-data-set" class="section level3" number="4.5.5">
<h3><span class="header-section-number">4.5.5</span> The Michelson speed of light data set</h3>
<p>The <code>morley</code> data set contains measurements of the speed of light (in kilometres per second with 299,000 subtracted) from the year 1879
for five experiments, each with 20 consecutive runs <span class="citation">(<a href="#ref-lightdata" role="doc-biblioref">Michelson 1882</a>)</span>. This data set is available in base R under the name <code>morley</code> so it does not need to be loaded.</p>
<p><strong>Question:</strong> Given what we know now about the speed of
light (299,792.458 kilometres per second), how accurate were each of the experiments?</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="viz.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># michelson morley experimental data</span></span>
<span id="cb214-2"><a href="viz.html#cb214-2" aria-hidden="true" tabindex="-1"></a>morley</span></code></pre></div>
<pre><code>## # A tibble: 100 x 3
##     Expt   Run Speed
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1     1     1   850
##  2     1     2   740
##  3     1     3   900
##  4     1     4  1070
##  5     1     5   930
##  6     1     6   850
##  7     1     7   950
##  8     1     8   980
##  9     1     9   980
## 10     1    10   880
## # … with 90 more rows</code></pre>
<p>In this experimental data, Michelson was trying to measure just a single quantitative number (the speed of light). The data set
contains many measurements of this single quantity. To tell how accurate the experiments were, we need to visualize the
distribution of the measurements (i.e., all their possible values and how often each occurs). We can do this using a <em>histogram</em>. A histogram helps us visualize how a
particular variable is distributed in a data set by separating the data into bins, and then using vertical bars
to show how many data points fell in each bin. To create a histogram in <code>ggplot2</code> we will use the <code>geom_histogram</code> geometric
object, setting the <code>x</code> axis to the <code>Speed</code> measurement variable; and as we did before, let’s use the default arguments just to see how things look:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="viz.html#cb216-1" aria-hidden="true" tabindex="-1"></a>morley_hist <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(morley, <span class="fu">aes</span>(<span class="at">x =</span> Speed)) <span class="sc">+</span></span>
<span id="cb216-2"><a href="viz.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb216-3"><a href="viz.html#cb216-3" aria-hidden="true" tabindex="-1"></a>morley_hist</span></code></pre></div>
<div class="figure"><span id="fig:03-data-morley-hist"></span>
<img src="_main_files/figure-html/03-data-morley-hist-1.png" alt="Histogram of Michelson's speed of light data" width="672" />
<p class="caption">
Figure 4.18: Histogram of Michelson’s speed of light data
</p>
</div>
<p>Figure <a href="viz.html#fig:03-data-morley-hist">4.18</a> is a great start. However, we cannot tell how accurate the measurements are using this visualization unless we can see what the true value is.
In order to visualize the true speed of light, we will add a vertical line with the <code>geom_vline</code> function, setting the <code>xintercept</code> argument
to the true value. There is a similar function, <code>geom_hline</code>, that is used for plotting horizontal lines. Note that <em>vertical lines</em>
are used to denote quantities on the <em>horizontal axis</em>, while <em>horizontal lines</em> are used to denote quantities on the <em>vertical axis</em>.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="viz.html#cb217-1" aria-hidden="true" tabindex="-1"></a>morley_hist <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(morley, <span class="fu">aes</span>(<span class="at">x =</span> Speed)) <span class="sc">+</span></span>
<span id="cb217-2"><a href="viz.html#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb217-3"><a href="viz.html#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">792.458</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> <span class="fl">1.0</span>)</span>
<span id="cb217-4"><a href="viz.html#cb217-4" aria-hidden="true" tabindex="-1"></a>morley_hist</span></code></pre></div>
<div class="figure"><span id="fig:03-data-morley-hist-2"></span>
<img src="_main_files/figure-html/03-data-morley-hist-2-1.png" alt="Histogram of Michelson's speed of light data with vertical line indicating true speed of light" width="672" />
<p class="caption">
Figure 4.19: Histogram of Michelson’s speed of light data with vertical line indicating true speed of light
</p>
</div>
<p>In Figure <a href="viz.html#fig:03-data-morley-hist-2">4.19</a>, we also still cannot tell which experiments (denoted in the <code>Expt</code> column) led to which measurements; perhaps some experiments were more accurate than
others. To fully answer our question, we need to separate the measurements from each other visually. We can
try to do this using a <em>coloured</em> histogram, where counts from different experiments are stacked on top of each
other in different colours. We can create a histogram coloured by the <code>Expt</code> variable by adding it to the <code>fill</code> aesthetic mapping. We make sure the different colours can be seen (despite them all sitting on top of each other) by setting the <code>alpha</code> argument in <code>geom_histogram</code>
to <code>0.5</code> to make the bars slightly translucent:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="viz.html#cb218-1" aria-hidden="true" tabindex="-1"></a>morley_hist <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(morley, <span class="fu">aes</span>(<span class="at">x =</span> Speed, <span class="at">fill =</span> Expt)) <span class="sc">+</span></span>
<span id="cb218-2"><a href="viz.html#cb218-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb218-3"><a href="viz.html#cb218-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">792.458</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> <span class="fl">1.0</span>)</span>
<span id="cb218-4"><a href="viz.html#cb218-4" aria-hidden="true" tabindex="-1"></a>morley_hist</span></code></pre></div>
<div class="figure"><span id="fig:03-data-morley-hist-3"></span>
<img src="_main_files/figure-html/03-data-morley-hist-3-1.png" alt="Histogram of Michelson's speed of light data coloured by experiment" width="672" />
<p class="caption">
Figure 4.20: Histogram of Michelson’s speed of light data coloured by experiment
</p>
</div>
<p>Wait a second, we notice that the histogram is still all the same colour! What is going on here? If we look at the printed <code>morley</code> data, the column <code>Expt</code> is an integer (we see the label <code>&lt;int&gt;</code> underneath the <code>Expt</code> column name). But, we want to treat it as a categorical variable. To fix this issue we can write <code>factor(Expt)</code> in the <code>fill</code> aesthetic mapping. By writing <code>factor(Expt)</code> we are ensuring that R will treat this variable as a factor and the colour will be mapped discretely.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="viz.html#cb219-1" aria-hidden="true" tabindex="-1"></a>morley_hist <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(morley, <span class="fu">aes</span>(<span class="at">x =</span> Speed, <span class="at">fill =</span> Expt)) <span class="sc">+</span></span>
<span id="cb219-2"><a href="viz.html#cb219-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb219-3"><a href="viz.html#cb219-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">792.458</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> <span class="fl">1.0</span>)</span>
<span id="cb219-4"><a href="viz.html#cb219-4" aria-hidden="true" tabindex="-1"></a>morley_hist</span></code></pre></div>
<div class="figure"><span id="fig:03-data-morley-hist-with-factor"></span>
<img src="_main_files/figure-html/03-data-morley-hist-with-factor-1.png" alt="Histogram of Michelson's speed of light data coloured by experiment as factor" width="672" />
<p class="caption">
Figure 4.21: Histogram of Michelson’s speed of light data coloured by experiment as factor
</p>
</div>
<blockquote>
<p>Factors impact plots in two ways:
(1) ensuring a colour is mapped as discretely where appropriate (like in this example) and (2) the ordering of levels in a plot. <code>ggplot</code> takes into account the order of the factor levels as opposed to the order that is displayed in your data frame. Learning how to reorder your factor levels will help you with reordering the labels of a factor on a plot.</p>
</blockquote>
<p>Unfortunately, the attempt to separate out the experiment number visually has created a bit of a mess. All of the colours in Figure <a href="viz.html#fig:03-data-morley-hist-3">4.20</a>
are blending together, and although it is possible to derive <em>some</em> insight from this (e.g., experiments 1 and 3 had some
of the most incorrect measurements), it isn’t the clearest way to convey our message and answer the question. Let’s try a different strategy of
creating multiple separate histograms on top of one another.</p>
<p>In order to create a plot in <code>ggplot2</code> that has multiple subplots arranged in a grid, we use the <code>facet_grid</code> function.
The argument to <code>facet_grid</code> specifies the variable(s) used to split the plot into subplots. It has the syntax <code>vertical_variable ~ horizontal_variable</code>,
where <code>veritcal_variable</code> is used to split the plot vertically, <code>horizontal_variable</code> is used to split horizontally, and <code>.</code> is used if there should be no split
along that axis. In our case, we only want to split vertically along the <code>Expt</code> variable, so we use <code>Expt ~ .</code> as the argument to <code>facet_grid</code>.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="viz.html#cb220-1" aria-hidden="true" tabindex="-1"></a>morley_hist <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(morley, <span class="fu">aes</span>(<span class="at">x =</span> Speed, <span class="at">fill =</span> <span class="fu">factor</span>(Expt))) <span class="sc">+</span></span>
<span id="cb220-2"><a href="viz.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb220-3"><a href="viz.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Expt <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb220-4"><a href="viz.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">792.458</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> <span class="fl">1.0</span>)</span>
<span id="cb220-5"><a href="viz.html#cb220-5" aria-hidden="true" tabindex="-1"></a>morley_hist</span></code></pre></div>
<div class="figure"><span id="fig:03-data-morley-hist-4"></span>
<img src="_main_files/figure-html/03-data-morley-hist-4-1.png" alt="Histogram of Michelson's speed of light data split vertically by experiment" width="672" />
<p class="caption">
Figure 4.22: Histogram of Michelson’s speed of light data split vertically by experiment
</p>
</div>
<p>The visualization in Figure <a href="viz.html#fig:03-data-morley-hist-4">4.22</a> now makes it quite clear how accurate the different experiments were with respect to one another.
There are two finishing touches to make this visualization even clearer. First and foremost, we need to add informative axis labels
using the <code>labs</code> function, and increase the font size to make it readable using the <code>theme</code> function. Second, and perhaps more subtly, even though it
is easy to compare the experiments on this plot to one another, it is hard to get a sense
for just how accurate all the experiments were overall. For example, how accurate is the value 800 on the plot, relative to the true speed of light?
To answer this question, we’ll use the <code>mutate</code> function to transform our data into a relative measure of accuracy rather than absolute measurements:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="viz.html#cb221-1" aria-hidden="true" tabindex="-1"></a>morley_rel <span class="ot">&lt;-</span> <span class="fu">mutate</span>(morley, <span class="at">relative_accuracy =</span> <span class="dv">100</span> <span class="sc">*</span> ((<span class="dv">299000</span> <span class="sc">+</span> Speed) <span class="sc">-</span> <span class="fl">299792.458</span>) <span class="sc">/</span> (<span class="fl">299792.458</span>))</span>
<span id="cb221-2"><a href="viz.html#cb221-2" aria-hidden="true" tabindex="-1"></a>morley_hist <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(morley_rel, <span class="fu">aes</span>(<span class="at">x =</span> relative_accuracy, <span class="at">fill =</span> <span class="fu">factor</span>(Expt))) <span class="sc">+</span></span>
<span id="cb221-3"><a href="viz.html#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb221-4"><a href="viz.html#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Expt <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb221-5"><a href="viz.html#cb221-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> <span class="fl">1.0</span>) <span class="sc">+</span></span>
<span id="cb221-6"><a href="viz.html#cb221-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Relative Accuracy (%)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;# Measurements&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Experiment ID&quot;</span>) <span class="sc">+</span></span>
<span id="cb221-7"><a href="viz.html#cb221-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span>
<span id="cb221-8"><a href="viz.html#cb221-8" aria-hidden="true" tabindex="-1"></a>morley_hist</span></code></pre></div>
<div class="figure"><span id="fig:03-data-morley-hist-5"></span>
<img src="_main_files/figure-html/03-data-morley-hist-5-1.png" alt="Histogram of relative accuracy split vertically by experiment with clearer axes and labels" width="672" />
<p class="caption">
Figure 4.23: Histogram of relative accuracy split vertically by experiment with clearer axes and labels
</p>
</div>
<p>Wow, impressive! These measurements of the speed of light from 1879 had errors around <em>0.05%</em> of the true speed. Figure <a href="viz.html#fig:03-data-morley-hist-5">4.23</a> shows you that even though experiments 2 and 5 were perhaps the most accurate, all of the experiments did quite an
admirable job given the technology available at the time.</p>
</div>
</div>
<div id="explaining-the-visualization" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Explaining the visualization</h2>
<div id="tell-a-story" class="section level4" number="4.6.0.1">
<h4><span class="header-section-number">4.6.0.1</span> <em>Tell a story</em></h4>
<p>Typically, your visualization will not be shown entirely on its own, but rather it will be part of a larger presentation.
Further, visualizations can provide supporting information for any aspect of a presentation, from opening to conclusion.
For example, you could use an exploratory visualization in the opening of the presentation to motivate your choice
of a more detailed data analysis / model, a visualization of the results of your analysis to show what your analysis has uncovered,
or even one at the end of a presentation to help suggest directions for future work.</p>
<p>Regardless of where it appears, a good way to discuss your visualization is as a story:</p>
<ol style="list-style-type: decimal">
<li>Establish the setting and scope, and motivate why you did what you did.</li>
<li>Pose the question that your visualization answers. Justify why the question is important to answer.</li>
<li>Answer the question using your visualization. Make sure you describe <em>all</em> aspects of the visualization (including describing the axes). But you
can emphasize different aspects based on what is important to answer your question:
<ul>
<li><strong>trends (lines):</strong> Does a line describe the trend well? If so, the trend is <em>linear</em>, and if not, the trend is <em>nonlinear</em>. Is the trend increasing, decreasing, or neither?
Is there a periodic oscillation (wiggle) in the trend? Is the trend noisy (does the line “jump around” a lot) or smooth?</li>
<li><strong>distributions (scatters, histograms):</strong> How spread out are the data? Where are they centered, roughly? Are there any obvious “clusters” or “subgroups,” which would be visible as multiple bumps in the histogram?<br />
</li>
<li><strong>distributions of two variables (scatters):</strong> is there a clear / strong relationship between the variables (points fall in a distinct pattern), a weak one (points fall in a pattern but there is some noise), or no discernible
relationship (the data are too noisy to make any conclusion)?</li>
<li><strong>amounts (bars):</strong> How large are the bars relative to one another? Are there patterns in different groups of bars?</li>
</ul></li>
<li>Summarize your findings, and use them to motivate whatever you will discuss next.</li>
</ol>
<p>Below are two examples of how one might take these four steps in describing the example visualizations that appeared earlier in this chapter.
Each of the steps is denoted by its numeral in parentheses, e.g. (3).</p>
<p><strong>Mauna Loa Atmospheric CO2 Measurements:</strong> (1) Many current forms of energy generation and conversion—from automotive engines to natural gas power plants—rely on burning
fossil fuels and produce greenhouse gases, typically primarily carbon dioxide (CO2), as a byproduct. Too much of these gases in the Earth’s atmosphere will cause it to trap
more heat from the sun, leading to global warming. (2) In order to assess how quickly the atmospheric concentration of CO2 is increasing over time, we (3) used a data set from
the Mauna Loa observatory from Hawaii, consisting of CO2 measurements from 1959 to the present. We plotted the measured concentration of CO2 (on the vertical axis) over time
(on the horizontal axis). From this plot, you can see a clear, increasing, and generally linear trend over time. There is also a periodic oscillation that occurs once per year and
aligns with Hawaii’s seasons, with an amplitude that is small relative to the growth in the overall trend. This shows that atmospheric CO2 is clearly increasing over
time, and (4) it is perhaps worth investigating more into the causes.</p>
<p><strong>Michelson Light Speed Experiments:</strong> (1) Our modern understanding of the physics of light has advanced significantly from the
late 1800s when Michelson and Morley’s experiments first demonstrated that it had a finite speed. We now know based on modern experiments that it
moves at roughly 299792.458 kilometres per second. (2) But how accurately were we first able to measure this fundamental physical constant, and did certain
experiments produce more accurate results than others?
(3) To better understand this we plotted data from 5 experiments by Michelson in 1879, each with 20 trials, as histograms stacked on top of one another.
The horizontal axis shows the accuracy of the measurements relative to the true speed of light as we know it today, expressed as a percentage.
From this visualization, you can see that most results had relative errors of at most 0.05%. You can also see that experiments 1 and 3 had
measurements that were the farthest from the true value, and experiment 5 tended to provide the most consistently accurate result. (4) It would be
worth further investigating the differences between these experiments to see why they produced different results.</p>
</div>
</div>
<div id="saving-the-visualization" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Saving the visualization</h2>
<div id="choose-the-right-output-format-for-your-needs" class="section level4" number="4.7.0.1">
<h4><span class="header-section-number">4.7.0.1</span> <em>Choose the right output format for your needs</em></h4>
<p>Just as there are many ways to store data sets, there are many ways to store visualizations and images.
Which one you choose can depend on several factors, such as file size/type limitations
(e.g., if you are submitting your visualization as part of a conference paper or to a poster printing shop)
and where it will be displayed (e.g., online, in a paper, on a poster, on a billboard, in talk slides).
Generally speaking, images come in two flavours: <em>bitmap</em> (or <em>raster</em>) formats and <em>vector</em> (or <em>scalable graphics</em>) formats.</p>
<p><strong>Bitmap / Raster</strong> images are represented as a 2-D grid of square pixels, each with its own colour. Raster images are often <em>compressed</em> before storing so they take up less space. A compressed format is <em>lossy</em> if the image cannot be perfectly recreated when loading and displaying, with the hope that the change is not noticeable. <em>Lossless</em> formats, on the other hand, allow a perfect display of the original image.</p>
<ul>
<li><em>Common file types:</em>
<ul>
<li><a href="https://en.wikipedia.org/wiki/JPEG">JPEG</a> (<code>.jpg</code>, <code>.jpeg</code>): lossy, usually used for photographs</li>
<li><a href="https://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a> (<code>.png</code>): lossless, usually used for plots / line drawings</li>
<li><a href="https://en.wikipedia.org/wiki/BMP_file_format">BMP</a> (<code>.bmp</code>): lossless, raw image data, no compression (rarely used)</li>
<li><a href="https://en.wikipedia.org/wiki/TIFF">TIFF</a> (<code>.tif</code>, <code>.tiff</code>): typically lossless, no compression, used mostly in graphic arts, publishing</li>
</ul></li>
<li><em>Open-source software:</em> <a href="https://www.gimp.org/">GIMP</a></li>
</ul>
<p><strong>Vector / Scalable Graphics</strong> images are represented as a collection of mathematical objects (lines, surfaces, shapes, curves). When the computer displays the image, it redraws all of the elements using their mathematical formulas.</p>
<ul>
<li><em>Common file types:</em>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a> (<code>.svg</code>): general-purpose use</li>
<li><a href="https://en.wikipedia.org/wiki/Encapsulated_PostScript">EPS</a> (<code>.eps</code>), general-purpose use (rarely used)</li>
</ul></li>
<li><em>Open-source software:</em> <a href="https://inkscape.org/">Inkscape</a></li>
</ul>
<p>Raster and vector images have opposing advantages and disadvantages. A raster image of a fixed width / height takes the same amount of space and time to load regardless of
what the image shows (caveat: the compression algorithms may shrink the image more or run faster for certain images). A vector image takes space and time to load
corresponding to how complex the image is, since the computer has to draw all the elements each time it is displayed. For example, if you have a scatter plot with 1 million
points stored as an SVG file, it may take your computer some time to open the image. On the other hand, you can zoom into / scale up
vector graphics as much as you like without the image looking bad, while raster images eventually start to look “pixellated.”</p>
<blockquote>
<p><strong>PDF files:</strong>
The portable document format <a href="https://en.wikipedia.org/wiki/PDF">PDF</a> (<code>.pdf</code>) is commonly used to
store <em>both</em> raster and vector graphics formats. If you try to open a PDF and it’s taking a long time
to load, it may be because there is a complicated vector graphics image that your computer is rendering.</p>
</blockquote>
<p>Let’s investigate how different image file formats behave with a scatter plot of the
<a href="https://www.stat.cmu.edu/~larry/all-of-statistics/=data/faithful.dat">Old Faithful data set</a> <span class="citation">(<a href="#ref-faithfuldata" role="doc-biblioref">Hardle 1991</a>)</span>:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="viz.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(svglite) <span class="co"># we need this to save SVG files</span></span>
<span id="cb222-2"><a href="viz.html#cb222-2" aria-hidden="true" tabindex="-1"></a>faithful_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> faithful, <span class="fu">aes</span>(<span class="at">x =</span> waiting, <span class="at">y =</span> eruptions)) <span class="sc">+</span></span>
<span id="cb222-3"><a href="viz.html#cb222-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb222-4"><a href="viz.html#cb222-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-5"><a href="viz.html#cb222-5" aria-hidden="true" tabindex="-1"></a>faithful_plot</span></code></pre></div>
<div class="figure"><span id="fig:03-plot-line"></span>
<img src="_main_files/figure-html/03-plot-line-1.png" alt="Scatter plot of waiting time and eruption time" width="672" />
<p class="caption">
Figure 4.24: Scatter plot of waiting time and eruption time
</p>
</div>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="viz.html#cb223-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-2"><a href="viz.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;faithful_plot.png&quot;</span>, faithful_plot)</span>
<span id="cb223-3"><a href="viz.html#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;faithful_plot.jpg&quot;</span>, faithful_plot)</span>
<span id="cb223-4"><a href="viz.html#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;faithful_plot.bmp&quot;</span>, faithful_plot)</span>
<span id="cb223-5"><a href="viz.html#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;faithful_plot.tiff&quot;</span>, faithful_plot)</span>
<span id="cb223-6"><a href="viz.html#cb223-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;faithful_plot.svg&quot;</span>, faithful_plot)</span>
<span id="cb223-7"><a href="viz.html#cb223-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-8"><a href="viz.html#cb223-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;PNG filesize: &quot;</span>, <span class="fu">file.info</span>(<span class="st">&quot;faithful_plot.png&quot;</span>)[<span class="st">&quot;size&quot;</span>] <span class="sc">/</span> <span class="dv">1000000</span>, <span class="st">&quot;MB&quot;</span>))</span>
<span id="cb223-9"><a href="viz.html#cb223-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;PNG filesize:  0.134178 MB&quot;</span></span>
<span id="cb223-10"><a href="viz.html#cb223-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;JPG filesize: &quot;</span>, <span class="fu">file.info</span>(<span class="st">&quot;faithful_plot.jpg&quot;</span>)[<span class="st">&quot;size&quot;</span>] <span class="sc">/</span> <span class="dv">1000000</span>, <span class="st">&quot;MB&quot;</span>))</span>
<span id="cb223-11"><a href="viz.html#cb223-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;JPG filesize:  0.370329 MB&quot;</span></span>
<span id="cb223-12"><a href="viz.html#cb223-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;BMP filesize: &quot;</span>, <span class="fu">file.info</span>(<span class="st">&quot;faithful_plot.bmp&quot;</span>)[<span class="st">&quot;size&quot;</span>] <span class="sc">/</span> <span class="dv">1000000</span>, <span class="st">&quot;MB&quot;</span>))</span>
<span id="cb223-13"><a href="viz.html#cb223-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;BMP filesize:  3.148978 MB&quot;</span></span>
<span id="cb223-14"><a href="viz.html#cb223-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;TIFF filesize: &quot;</span>, <span class="fu">file.info</span>(<span class="st">&quot;faithful_plot.tiff&quot;</span>)[<span class="st">&quot;size&quot;</span>] <span class="sc">/</span> <span class="dv">1000000</span>, <span class="st">&quot;MB&quot;</span>))</span>
<span id="cb223-15"><a href="viz.html#cb223-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;TIFF filesize:  9.443904 MB&quot;</span></span>
<span id="cb223-16"><a href="viz.html#cb223-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;SVG filesize: &quot;</span>, <span class="fu">file.info</span>(<span class="st">&quot;faithful_plot.svg&quot;</span>)[<span class="st">&quot;size&quot;</span>] <span class="sc">/</span> <span class="dv">1000000</span>, <span class="st">&quot;MB&quot;</span>))</span>
<span id="cb223-17"><a href="viz.html#cb223-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;SVG filesize:  0.030047 MB&quot;</span></span></code></pre></div>
<p>Wow, that’s quite a difference! Notice that for such a simple plot with few graphical elements (points), the vector graphics format (SVG) is over 100
times smaller than the uncompressed raster images (BMP, TIFF). Also, note that the JPG format is twice as large as the PNG format since the JPG
compression algorithm is designed for natural images (not plots). Below, we also show what the images look like when we zoom in to a rectangle with only 3 data points.
You can see why vector graphics formats are so useful: because they’re just based on mathematical formulas, vector graphics can be scaled up to arbitrary sizes.
This makes them great for presentation media of all sizes, from papers to posters to billboards.</p>
<div class="figure" style="text-align: center"><span id="fig:03-raster-image"></span>
<img src="img/faithful_zoom.png" alt="Zoomed in `faithful`, raster (PNG, left) and vector (SVG, right) formats" width="230px" height="200px" /><img src="img/faithful_zoom.svg" alt="Zoomed in `faithful`, raster (PNG, left) and vector (SVG, right) formats" width="230px" height="200px" />
<p class="caption">
Figure 4.25: Zoomed in <code>faithful</code>, raster (PNG, left) and vector (SVG, right) formats
</p>
</div>
</div>
</div>
<div id="additional-resources-2" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> Additional resources</h2>
<ul>
<li>The <a href="https://ggplot2.tidyverse.org"><code>ggplot2</code> page on the tidyverse website</a> is where you should look if you want to learn more about the functions in this chapter, the full set of arguments you can use, and other related functions. The site also provides a very nice cheat sheet that summarizes many of the data wrangling functions from this chapter.</li>
<li>The <a href="https://serialmentor.com/dataviz/">Fundamentals of Data Visualization</a> has a wealth of information on designing effective visualizations. It is not specific to any particular programming language or library. If you want to improve your visualization skills, this is the next place to look.</li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a> has a chapter on <a href="https://r4ds.had.co.nz/data-visualisation.html">creating visualizations using <code>ggplot2</code></a>. This reference is specific to R and <code>ggplot2</code>, but provides a much more detailed introduction to the full set of tools that <code>ggplot2</code> provides. This chapter is where you should look if you want to learn how to make more intricate visualizations in <code>ggplot2</code> than what is included in this chapter.</li>
</ul>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-faithfuldata" class="csl-entry">
Hardle, Wolfgang. 1991. <span>“Smoothing Techniques with Implementation in <span>S</span>.”</span> New York: Springer.
</div>
<div id="ref-islandsdata" class="csl-entry">
McNeil, Donald R. 1977. <span>“Interactive Data Analysis.”</span> Wiley.
</div>
<div id="ref-lightdata" class="csl-entry">
Michelson, Albert. 1882. <span>“Experimental Determination of the Velocity of Light Made at the United States Naval Academy, Annapolis.”</span> <em>Astronomic Papers</em>. U.S. Nautical Almanac Office.
</div>
<div id="ref-RColorBrewer" class="csl-entry">
Neuwirth, Erich. 2014. <em><span>RColorBrewer</span>: ColorBrewer Palettes</em>.
</div>
<div id="ref-maunadata" class="csl-entry">
Tans, Pieter, and Ralph Keeling. 2020. <span>“Trends in Atmospheric Carbon Dioxide.”</span> <a href="https://gml.noaa.gov/ccgg/trends/data.html">https://gml.noaa.gov/ccgg/trends/data.html</a>.
</div>
<div id="ref-timbers2020canlang" class="csl-entry">
Timbers, Tiffany. 2020. <em><span class="nocase">canlang</span>: Canadian Census Language Data</em>. <a href="https://ttimbers.github.io/canlang/">https://ttimbers.github.io/canlang/</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="wrangling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="classification.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/viz.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
